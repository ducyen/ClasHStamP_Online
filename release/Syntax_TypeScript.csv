item,name,ext1st,extnxt,begin,end
file,[container]/[Name].ts,"import { [nAME] } from ""#[container]/[nAME]"";
","import { [nAME] } from ""#[container]/[nAME]"";
","/* File generated by Đức's ClasHStamP */
import type { Integer, long, Boolean, String, ResetArgs } from ""#all_notations/java_sample00/stdtype/stdtype"";
",
inheritance, extends [tYPE], implements [nAME],", [nAME]",,
template,<[nAME]>,[nAME],", [nAME]",[nAME],[nAME] extends [tYPE]
class,"
[->]export class [nAME][mODIFIER][tYPE]
[vALUE]",,,"[->]{
","[->]}
"
b_enum,"[->]public  enum [Name] {
","[->][nAME],[->64][dESC]
","[->][nAME],[->64][dESC]
",,"[->]    [nAME]_NUM
[->]};
"
c_enum,"[->]protected  enum [Name] {
","[->][nAME],[->64][dESC]
","[->][nAME],[->64][dESC]
",,"[->]    [nAME]_NUM
[->]};
"
i_enum,"[->]private enum [Name] {
","[->][nAME],[->64][dESC]
","[->][nAME],[->64][dESC]
",,"[->]    [nAME]_NUM
[->]};
"
b_struct,"[->]public static class [Name] {
","[->]public [nAME]: [tYPE][mODIFIER];[->64][dESC]
","[->]public [nAME]: [tYPE][mODIFIER];[->64][dESC]
","[->]public static class [Name] extends [tYPE]{
","[->]};
"
c_struct,"[->]protected static class [Name] {
","[->]public [nAME]: [tYPE][mODIFIER];[->64][dESC]
","[->]public [nAME]: [tYPE][mODIFIER];[->64][dESC]
","[->]protected static class [Name] extends [tYPE]{
","[->]};
"
i_struct,"[->]private static class [Name] {
","[->]public [nAME]: [tYPE][mODIFIER];[->64][dESC]
","[->]public [nAME]: [tYPE][mODIFIER];[->64][dESC]
","[->]private static class [Name] extends [tYPE]{
","[->]};
"
constructor,[->]constructor(,,,"
[->]){","
[->]}[->96]
"
attr_group,,,,,
ctor_call,"
[->]) {
[->]    super( [vALUE] );
",[vALUE],", [vALUE]",_[nAME],[nAME]
__s_attr,"[->][scope][nAME]: [tYPE];[->64][dESC]
","
[->]    _[nAME]: [tYPE]",",
[->]    _[nAME]: [tYPE]","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
__o_attr,"[->][scope][nAME]: [tYPE];[->65][dESC]
","
[->]    _[nAME]: [tYPE]",",
[->]    _[nAME]: [tYPE]","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
__r_attr,"[->][scope][nAME]: [tYPE] | undefined;[->66][dESC]
","
[->]    _[nAME]: [tYPE] | undefined",",
[->]    _[nAME]: [tYPE] | undefined","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
_ms_attr,"[->][scope][nAME]: [tYPE][];[->67][dESC]
","
[->]    _[nAME]: [tYPE][]",",
[->]    _[nAME]: [tYPE][]","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
_mo_attr,"[->][scope][nAME]: [tYPE][];[->67][dESC]
","
[->]    _[nAME]: [tYPE][]",",
[->]    _[nAME]: [tYPE][]","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
_mr_attr,"[->][scope][nAME]: [tYPE][] | undefined;[->67][dESC]
","
[->]    _[nAME]: [tYPE][] | undefined",",
[->]    _[nAME]: [tYPE][] | undefined","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
c_s_attr,"[->][scope]readonly [nAME]: [tYPE];[->64][dESC]
","
[->]    _[nAME]: [tYPE]",",
[->]    _[nAME]: [tYPE]","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
c_o_attr,"[->][scope]readonly [nAME]: [tYPE];[->65][dESC]
","
[->]    _[nAME]: [tYPE]",",
[->]    _[nAME]: [tYPE]","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
c_r_attr,"[->][scope]readonly [nAME]: [tYPE] | undefined;[->66][dESC]
","
[->]    _[nAME]: [tYPE] | undefined",",
[->]    _[nAME]: [tYPE] | undefined","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
cms_attr,"[->][scope]readonly [nAME]: [tYPE][];[->64][dESC]
","
[->]    [tYPE][] _[nAME]",",
[->]    [tYPE][] _[nAME]","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
cmo_attr,"[->][scope]readonly [nAME]: [tYPE][];[->64][dESC]
","
[->]    [tYPE][] _[nAME]",",
[->]    [tYPE][] _[nAME]","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
cmr_attr,"[->][scope]readonly [nAME]: [tYPE][] | undefined;[->64][dESC]
","
[->]    [tYPE][] _[nAME] | undefined",",
[->]    [tYPE][] _[nAME] | undefined","
[->]this.[nAME] = [vALUE];","
[->]this.[nAME] = [vALUE];"
s_s_attr,"[->][scope]static [nAME]: [tYPE] = [vALUE];[->64][dESC]
","[->][scope]static readonly [nAME]: [tYPE] = [vALUE];[->64][dESC]
",,,"[->][scope]static [nAME]: [tYPE];[->64][dESC]
"
s_o_attr,"[->][scope]static [nAME]: [tYPE] = [vALUE];[->64][dESC]
","[->][scope]static readonly [nAME]: [tYPE] = [vALUE];[->64][dESC]
",,,"[->][scope]static [nAME]: [tYPE];[->64][dESC]
"
s_r_attr,"[->][scope]static [nAME]: [tYPE] = [vALUE] | undefined;[->64][dESC]
","[->][scope]static readonly [nAME]: [tYPE] = [vALUE];[->64][dESC]
",,,"[->][scope]static [nAME]: [tYPE];[->64][dESC]
"
sms_attr,"[->][scope]static [nAME]: [tYPE][] = [vALUE];[->64][dESC]
","[->][scope]static readonly [nAME]: [tYPE][] = [vALUE];[->64][dESC]
",,,"[->][scope]static [nAME]: [tYPE][] = new [tYPE][[mODIFIER]];[->64][dESC]
"
smo_attr,"[->][scope]static [nAME]: [tYPE][] = [vALUE];[->64][dESC]
","[->][scope]static readonly [nAME]: [tYPE][] = [vALUE];[->64][dESC]
",,,"[->][scope]static [nAME]: [tYPE][] = new [tYPE][[mODIFIER]];;[->64][dESC]
"
smr_attr,"[->][scope]static [nAME]: [tYPE][] = [vALUE] | undefined;[->64][dESC]
","[->][scope]static readonly [nAME]: [tYPE][] = [vALUE];[->64][dESC]
",,,"[->][scope]static [nAME]: [tYPE][] = new [tYPE][[mODIFIER]];;[->64][dESC]
"
p_s_attr,,"[->][sCOPE][tYPE] get[Name](){
[->]    [vALUE]
[->]}
","[->][sCOPE]set[Name]([tYPE] value): void{
[->]    [vALUE]
[->]}
",return this.[nAME];,this.[nAME] = value;
p_o_attr,,"[->][sCOPE][tYPE] get[Name](){
[->]    [vALUE]
[->]}
","[->][sCOPE]set[Name]([tYPE] value): void{
[->]    [vALUE]
[->]}
",return this.[nAME];,this.[nAME] = value;
p_r_attr,,"[->][sCOPE][tYPE] get[Name](){
[->]    [vALUE]
[->]}
","[->][sCOPE]set[Name]([tYPE] value): void{
[->]    [vALUE]
[->]}
",return this.[nAME];,this.[nAME] = value;
pms_attr,,"[->][sCOPE][tYPE] get[Name](){
[->]    [vALUE]
[->]}
","[->][sCOPE]set[Name]([tYPE] value): void{
[->]    [vALUE]
[->]}
",return this.[nAME];,this.[nAME] = value;
pmo_attr,,"[->][sCOPE][tYPE] get[Name](){
[->]    [vALUE]
[->]}
","[->][sCOPE]set[Name]([tYPE] value): void{
[->]    [vALUE]
[->]}
",return this.[nAME];,this.[nAME] = value;
pmr_attr,,"[->][sCOPE][tYPE] get[Name](){
[->]    [vALUE]
[->]}
","[->][sCOPE]set[Name]([tYPE] value): void{
[->]    [vALUE]
[->]}
",return this.[nAME];,this.[nAME] = value;
vptr_impl,,,,,
__c_oper,[->]protected [nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */

"
__b_oper,[->][scope][nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */

"
vptr_decl,,,,,
_ac_oper,[->]protected [nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */

"
_ab_oper,[->][scope][nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */
"
l_i_oper,[->]private [nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */
"
l_c_oper,[->]protected [nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */
"
l_b_oper,[->][scope][nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */
"
lai_oper,,,,,
vptr_call,,,,,
s_i_oper,[->]private static[nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */
"
s_c_oper,[->]protected static[nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */
"
s_b_oper,[->][scope]static[nAME](,"
[->][nAME]: [tYPE]",",
[->][nAME]: [tYPE]","
[->]): [tYPE] {
","[->]} /* [Container].[nAME] */
"
sai_oper,,,,,
sab_oper,,,,,
event_decl,,"[->]public static readonly [nAME] = [vALUE];
","[->]public static readonly [nAME] = [vALUE];
",,"[->]public Start(): boolean{
[->]    this.mainStm.Prepare( undefined );
[->]    let bResult: boolean = this.mainStm.Reset( this );
[->]    bResult ||= this.mainStm.StateDefaultTrans( this );
[->]    return bResult;
[->]}
[->]public EventProc( nEventId: number, pEventParams: EventParams ): boolean{
[->]    let bResult: boolean = this.mainStm.EventProc( this, nEventId, pEventParams );
[->]    bResult ||= this.mainStm.StateDefaultTrans( this );
[->]    return bResult;
[->]}"
state_decl,"        public static readonly [nAME]: long [->48] = ( 1 << [vALUE] );
",        public static readonly [nAME]: long [->48] = ( [sCOPE].[vALUE], | [sCOPE].[vALUE],"/* states' declaration */
[vALUE]"," );
"
state_entry,"        EndTrans( p[tYPE]: [tYPE] ): void{
            this.nCurrentState = this.nTargetState;
            this.bIsExternTrans = false;
","            if( this.nCurrentState == [sCOPE].[nAME] ) [->32]{ this.[nAME]_Entry( p[tYPE] ); }
","            else if( this.nCurrentState == [sCOPE].[nAME] ) [->32]{ this.[nAME]_Entry( p[tYPE] ); }
","            else {}
","        }
"
state_exit,"        BgnTrans( p[tYPE]: [tYPE], targetState: long ): void{
            this.nTargetState = targetState;
            this.nPseudostate = targetState;
","            if( this.nCurrentState == [sCOPE].[nAME] ) [->32]{ this.[nAME]_Exit( p[tYPE] ); }
","            else if( this.nCurrentState == [sCOPE].[nAME] ) [->32]{ this.[nAME]_Exit( p[tYPE] ); }
","            else {}
","        }
"
state_impl,"        public Reset( p[tYPE]: [tYPE], args: ResetArgs = {} ): boolean {
            const entryPt = args.entryPt ?? StateMachine.STATE_UNDEF;
            const lastEnteredStateRecovering = args.lastEnteredStateRecovering ?? false;
            if( entryPt != StateMachine.STATE_UNDEF ){
                this.Req( entryPt );
                return false;
            }
            this.nPseudostate = [sCOPE].[nAME];
            this.bIsExternTrans = true;
            this.BgnTrans( p[tYPE], this.nPseudostate );
            this.EndTrans( p[tYPE] );
            return true;
        }
        public EventProc( p[tYPE]: [tYPE], nEventId: number, pEventParams: EventParams ): boolean{
            let bResult: boolean = false;
            this.nLCAState = StateMachine.STATE_UNDEF;
            this.bHandled = false;
            this.wasHandled = false;
","            if( this.nCurrentState == [sCOPE].[nAME] ) [->32]{ this.[nAME]_EventProc( p[tYPE], nEventId, pEventParams ); }
","            else if( this.nCurrentState == [sCOPE].[nAME] ) [->32]{ this.[nAME]_EventProc( p[tYPE], nEventId, pEventParams ); }
","            else {}
","            return bResult;
        }
        Abort( p[tYPE]: [tYPE] ): boolean {
            this.nSourceState = [sCOPE].[nAME];
            this.BgnTrans( p[tYPE], StateMachine.STATE_UNDEF );
            this.EndTrans( p[tYPE] );
            return true;
        }
"
transition,"        [nAME]_Entry( p[tYPE]: [tYPE] ): void{
            if( this.Enterable( [sCOPE].[nAME] ) ){
                this.[cONTAINER]_Entry( p[tYPE] );
                this.DefaultEntryAction( p[tYPE], ""[dESC]"" );
[vALUE]            }
        }
        [nAME]_EventProc( p[tYPE]: [tYPE], nEventId: number, pEventParams: EventParams ): boolean{
            let bResult: boolean = false;
[mODIFIER]            if( !this.bHandled ){
                this.nSourceState = [sCOPE].[nAME];
                this.DefaultDoingAction( p[tYPE], ""[dESC]"" );
","                switch( nEventId ){
                case [tYPE].[nAME]:{
","                } break;
                case [tYPE].[nAME]:{
","                } break;
                default: break;
                }
","            }
            this.bHandled ||= bResult;
            this.wasHandled ||= bResult;
            return this.[cONTAINER]_EventProc( p[tYPE], nEventId, pEventParams );
        }
        [nAME]_Exit( p[tYPE]: [tYPE] ): void{
            if( this.Exitable( [sCOPE].[nAME] ) ){ 
[vALUE]                 this.DefaultExitAction( p[tYPE], ""[dESC]"" );
                this.[cONTAINER]_Exit( p[tYPE] );
            }
        }
"
trans_top,"        [nAME]_Entry( p[tYPE]: [tYPE] ): void{
            if( this.Enterable( [sCOPE].[nAME] ) ){
[vALUE]            }
        }
        [nAME]_EventProc( p[tYPE]: [tYPE], nEventId: number, pEventParams: EventParams ): boolean{
            let bResult: boolean = false;
[mODIFIER]            if( !this.bHandled ){
                this.nSourceState = [sCOPE].[nAME];
","                switch( nEventId ){
                case [tYPE].[nAME]:{
","                } break;
                case [tYPE].[nAME]:{
","                } break;
                default: break;
                }
","            }
            this.bHandled ||= bResult;
            this.wasHandled ||= bResult;
            return this.bHandled;
        }
        [nAME]_Exit( p[tYPE]: [tYPE] ): void{
            if( this.Exitable( [sCOPE].[nAME] ) ){ 
[vALUE]            }
        }
"
branch,"[->]else {
","[->]if ([nAME]) {
","[->]} else if ([nAME]) {
","[->]} else {
","[->]}
"
comment,/**< [nAME] [->32]*/," * [nAME]
"," * [nAME]
","/**
"," */
"
action,"[->][nAME]Params* e = ( [nAME]Params* )pEventParams;
","[->][nAME]
","[->][nAME]
",,
param_dir,,,,,/
statemachine,"import { BaseStmTop } from ""#all_notations/java_sample00/stdtype/stdtype"";
import { StateMachine } from ""#all_notations/java_sample00/base/StateMachine"";
","    mainStm: [tYPE][mODIFIER];[->64][dESC]
","    this.mainStm = new [tYPE]();
","class [nAME] extends BaseStmTop {
        public pParentStm: StateMachine | undefined;
        public lastEnteredStateRecovering: boolean = false;
[vALUE]
","
        public Prepare( pParent: StateMachine | undefined ): void{
            this.pParentStm = pParent;
[vALUE]        }
} /* [nAME] */
"
default_trans,"        StateDefaultTrans( p[tYPE]: [tYPE] ): boolean{
            let bResult: boolean = false;
            this.nSourceState = this.nCurrentState;
            this.nLCAState = StateMachine.STATE_UNDEF;
", this.nPseudostate == [cONTAINER].[nAME] [mODIFIER] , this.nCurrentState == [sCOPE].[vALUE] && this.nPseudostate == [cONTAINER].[nAME] [mODIFIER] ,"            }else if( this.nCurrentState != this.nPseudostate ){
                this.BgnTrans( p[tYPE], this.nPseudostate );
                this.EndTrans( p[tYPE] );
                bResult = true;
            }else{
            }
","            this.bHandled ||= bResult;
            this.wasHandled ||= bResult;
            ( this.pMain as [sCOPE] ).lastEnteredStateRecovering = false;
            return bResult;
        }
"
substm,"    [nAME]: [cONTAINER] = new [cONTAINER]();[->64][dESC]
","    this.[nAME].Prepare( this.[mODIFIER] );
","
[->] && ( this.pMain as [sCOPE] ).[mODIFIER].IsFinished()","[->]( this.pMain as [sCOPE] ).[mODIFIER].Reset( p[tYPE], { entryPt: [cONTAINER].[nAME], lastEnteredStateRecovering: ( this.pMain as [sCOPE] ).lastEnteredStateRecovering } );
","[->]( this.pMain as [sCOPE] ).pParentStm?.Req( [sCOPE].[nAME] );
"
region,"        [nAME]: _[cONTAINER] = new _[cONTAINER]();[->64][dESC]
","            this.[nAME].pMain = this;
","
[->] && ( this.pMain as [sCOPE] ).[cONTAINER].nPseudostate == [sCOPE]_[vALUE]","[->]( this.pMain as [sCOPE] ).[mODIFIER].Reset( p[tYPE], { entryPt: [sCOPE].[nAME] } );
","class _[nAME] extends StateMachine {
[vALUE]}
"
state_action,"[->]if( !( this.pMain as [sCOPE] ).lastEnteredStateRecovering && this.nTargetState == [sCOPE].[nAME] ){
[->]    this.nPseudostate = [sCOPE].[mODIFIER];
[->]}
","[->]this.bIsExternTrans = true;
",[->][nAME],"[->]( this.pMain as [sCOPE] ).[mODIFIER].Reset( p[tYPE] );
","[->]( this.pMain as [sCOPE] ).[mODIFIER].Abort( p[tYPE] );
"
trans_action,"[->][nAME]Params* e = ( [nAME]Params* )pEventParams; // need merge from ""action"" ★
",( this.pMain as [sCOPE] ).[mODIFIER].IsIn( [sCOPE].[vALUE] ),"
[->] && HdStateMachine_IsIn( &( this.pMain as [sCOPE] ).[mODIFIER], [sCOPE].[vALUE] )","[->]this.BgnTrans( p[tYPE], [sCOPE].[nAME] );
[mODIFIER][->]this.EndTrans( p[tYPE] );
[->]bResult ||= true;
","[mODIFIER][->]bResult ||= true; // internal transition
"
history,"        [nAME]: long = StateMachine.STATE_UNDEF;
","            this.[nAME] = StateMachine.STATE_UNDEF;
","[->]( this.pMain as [sCOPE] ).[nAME] = [sCOPE].[vALUE];
","[->]if( ( this.pMain as [sCOPE] ).[nAME] != StateMachine.STATE_UNDEF ){
[->]    this.BgnTrans( p[tYPE], ( this.pMain as [sCOPE] ).[nAME] );
[mODIFIER][->]    this.EndTrans( p[tYPE] );
[->]    bResult ||= true;
[->]}else{
[vALUE][->]}
","[->]( this.pMain as [sCOPE] ).[nAME] = StateMachine.STATE_UNDEF;
"
deep_hist,"        [nAME]: long = StateMachine.STATE_UNDEF;
","            this.[nAME] = StateMachine.STATE_UNDEF;
","[->]( this.pMain as [sCOPE] ).[nAME] = this.lastEnteredState;
","[->]if( ( this.pMain as [sCOPE] ).[nAME] != StateMachine.STATE_UNDEF ){
[->]    this.BgnTrans( p[tYPE], ( this.pMain as [sCOPE] ).[nAME] );
[->]    ( this.pMain as [sCOPE] ).lastEnteredStateRecovering = true;
[mODIFIER][->]    this.EndTrans( p[tYPE] );
[->]    bResult ||= true;
[->]}else{
[vALUE][->]}
","[->]if ( ( this.pMain as [sCOPE] ).lastEnteredStateRecovering ) {
[->]    this.nPseudostate = this.lastEnteredState;
[->]}
"
stm_api,"        public EventProc( p[tYPE]: [tYPE], nEventId: number, pEventParams: EventParams ): boolean{
            return this.[cONTAINER].EventProc( p[tYPE], nEventId, pEventParams );
        }
        public StateDefaultTrans( p[tYPE]: [tYPE] ): boolean{
            let bResult: boolean;
            while( true ){
                bResult = false;
[mODIFIER]                if( bResult == false ){
                    break;
                }
            }
            return bResult;
        }
        public Reset( p[tYPE]: [tYPE], args: ResetArgs = {}): boolean {
            this.[cONTAINER].Abort( p[tYPE] );
            return this.[cONTAINER].Reset( p[tYPE], { entryPt: args.entryPt ?? StateMachine.STATE_UNDEF,
                lastEnteredStateRecovering: args.lastEnteredStateRecovering ?? false } );
        }
        public Abort( p[tYPE]: [tYPE] ): boolean{
            return this.[cONTAINER].Abort( p[tYPE] );
        }
        public IsFinished(): boolean{
            return this.[cONTAINER].nPseudostate == [sCOPE].[nAME];
        }
","            this.bHandled ||= ( this.pMain as [sCOPE] ).[cONTAINER].EventProc( p[tYPE], nEventId, pEventParams );
","    this.bHandled ||= ( this.pMain as [sCOPE] ).[mODIFIER].EventProc( p[tYPE], nEventId, pEventParams );
","                bResult ||= [mODIFIER]this.[cONTAINER].StateDefaultTrans( p[tYPE] );
","this.[mODIFIER].StateDefaultTrans( p[tYPE] )
[->]        || "
api_call,0,,#error XXXX,#error XXXX,
friend,,,,,
visibility,,,protected ,public ,private 
object,"Sprite* g_objects[] = {
[vALUE]
};
Sprite* getobj( int id ){
    return g_objects[ id ];
}
","
[->]    P( { [vALUE] } )[->64]/* [nAME] */",",
[->]    P( [vALUE] )[->64]/* [nAME] */","[->]&[tYPE]_Ctor( [->64]/* [nAME] */[vALUE]
[->])",",
[->]&[tYPE]_Ctor( [->64]/* [nAME] */[vALUE]
[->])"
