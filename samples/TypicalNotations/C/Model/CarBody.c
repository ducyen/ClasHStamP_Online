/* File generated by Đức's ClasHStamP */
#define __CarBody_INTERNAL__
#include "CommonInclude.h"
#include "CarBody.h"
#include "ObjsBuilder.h"                                        
/** @private @static @memberof CarBody */
static int gVar = 1;                                            
/** @private @static @memberof CarBody */
static int x = 2;                                               
/** @private @static @memberof CarBody */
static int y = 3;                                               
/** @public @memberof CarBody */
void CarBody_moveRight(
    CarBody* pCarBody
){
} /* CarBody_moveRight */

/** @public @memberof CarBody */
void CarBody_moveLeft(
    CarBody* pCarBody
){
} /* CarBody_moveLeft */

/** @public @memberof CarBody */
void CarBody_turnOff(
    CarBody* pCarBody
){
    ImgSprite_setBrightness(display, 0);
    ImgSprite_setBrightness(batteryOper, 0);
    ImgSprite_setBrightness(speedometer, 0);
    ImgSprite_setBrightness(radar, 0);
    ImgSprite_setBrightness(seatbelt, 0);
    ImgSprite_setBrightness(airbag, 0);
    ImgSprite_setBrightness(fanCtrl, 0);
    ImgSprite_setBrightness(gear, 0);
} /* CarBody_turnOff */

/** @public @memberof CarBody */
void CarBody_turnOn(
    CarBody* pCarBody
){
    ImgSprite_setBrightness(display, 1);
    ImgSprite_setBrightness(batteryOper, 1);
    ImgSprite_setBrightness(speedometer, 1);
    ImgSprite_setBrightness(radar, 1);
    ImgSprite_setBrightness(seatbelt, 1);
    ImgSprite_setBrightness(airbag, 1);
    ImgSprite_setBrightness(fanCtrl, 1);
    ImgSprite_setBrightness(gear, 1);
} /* CarBody_turnOn */

const TCHAR* CarBodyEvent_toString( CarBody_EVENT value ){
    switch( value ){
    case CarBody_E0: return _T( "E0" );
    case CarBody_E1: return _T( "E1" );
    case CarBody_E2: return _T( "E2" );
    case CarBody_E3: return _T( "E3" );
    case CarBody_E4: return _T( "E4" );
    case CarBody_E5: return _T( "E5" );
    case CarBody_UPDATE: return _T( "UPDATE" );
    default: return _T( "CarBody_UNKNOWN" );
    }
}
static BOOL MainTop_Reset( CarBody* pCarBody, MainTop* pUsm, STM_RESET* pResetParams );
static void MainTop_Prepare( MainTop* pUsm, HdStateMachine* pParent );
static BOOL MainTop_EventProc( CarBody* pCarBody, MainTop* pUsm, CarBody_EVENT nEventId, void* pEventParams );
static BOOL MainTop_StateDefaultTrans( CarBody* pCarBody, MainTop* pUsm );
BOOL CarBody_Start( CarBody* pCarBody ){
    MainTop_Prepare( &pCarBody->mainStm, NULL );
    BOOL bResult = MainTop_Reset( pCarBody, &pCarBody->mainStm, NULL );
    if( bResult ){
        MainTop_StateDefaultTrans( pCarBody, &pCarBody->mainStm );
    }
    return bResult;
}
BOOL CarBody_EventProc( CarBody* pCarBody, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = MainTop_EventProc( pCarBody, &pCarBody->mainStm, nEventId, pEventParams );
    if( bResult ){
        MainTop_StateDefaultTrans( pCarBody, &pCarBody->mainStm );
    }
    return bResult;
}

/**
 * Implementation for Statemachine: SharedTop
 */
const TCHAR* SharedTop_State_toString( SharedTop* pUsm, HdStateMachine* pHsm, uint64_t nState ){
    TCHAR* sState;
    if( pHsm == &pUsm->SharedStmHsm ){
        switch( nState ){
        case SharedTop_Charge                   : sState = "Charge"; break;
        case SharedTop_Drain                    : sState = "Drain"; break;
        case SharedTop_InitPt                   : sState = "InitPt"; break;
        case SharedTop_Discharging              : sState = "Discharging"; break;
        case SharedTop_Charging                 : sState = "Charging"; break;
        case SharedTop_Idle                     : sState = "Idle"; break;
        case SharedTop_Discharge                : sState = "Discharge"; break;
        case SharedTop_SharedStm                : sState = "SharedStm"; break;
        default                                 : sState = "UnknownState"; break;
        }
    }else { 
        sState = "UnknownState";
    }
    return sState;
}
static void SharedStmHsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState );
static void SharedStmHsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm );
static BOOL SharedStmHsm_Abort( CarBody* pCarBody, HdStateMachine* pStm );
static BOOL SharedStmHsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams );
static BOOL SharedStmHsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams );
static void SharedTop_SharedStm_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, SharedTop_SharedStm ) ){
        if( !( ( SharedTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == SharedTop_SharedStm ){
            pStm->nPseudostate = SharedTop_InitPt;
        }
        if ( ( ( SharedTop* )pStm->pMain )->lastEnteredStateRecovering ) {
            pStm->nPseudostate = pStm->lastEnteredState;
        }
    }
}
static BOOL SharedTop_SharedStm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = SharedTop_SharedStm;
    }
    pStm->bHandled |= bResult;
    return pStm->bHandled;
}
static void SharedTop_SharedStm_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, SharedTop_SharedStm ) ){ 
    }
}
static void SharedTop_Discharging_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, SharedTop_Discharging ) ){
        SharedTop_SharedStm_Entry( pCarBody, pStm );
        ImgSprite_setSpriteCoords(batteryOper, 0, 1);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/SharedTop	144	239	136	74	58	88	679	317" );
    }
}
static BOOL SharedTop_Discharging_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = SharedTop_Discharging;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/SharedTop	144	239	136	74	58	88	679	317" );
        switch( nEventId ){
        case CarBody_UPDATE:{
            if (FlexButton_GetValue(batteryLife) == 0) {
                SharedStmHsm_BgnTrans( pCarBody, pStm, SharedTop_SharedStm );
                ( ( SharedTop* )pStm->pMain )->pParentStm->nPseudostate = SharedTop_Drain;
                SharedStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            }
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return SharedTop_SharedStm_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void SharedTop_Discharging_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, SharedTop_Discharging ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/SharedTop	144	239	136	74	58	88	679	317" );
        SharedTop_SharedStm_Exit( pCarBody, pStm );
    }
}
static void SharedTop_Charging_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, SharedTop_Charging ) ){
        SharedTop_SharedStm_Entry( pCarBody, pStm );
        ImgSprite_setSpriteCoords(batteryOper, 0, 2);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/SharedTop	378	215	175	76	58	88	679	317" );
    }
}
static BOOL SharedTop_Charging_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = SharedTop_Charging;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/SharedTop	378	215	175	76	58	88	679	317" );
    }
    pStm->bHandled |= bResult;
    return SharedTop_SharedStm_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void SharedTop_Charging_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, SharedTop_Charging ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/SharedTop	378	215	175	76	58	88	679	317" );
        SharedTop_SharedStm_Exit( pCarBody, pStm );
    }
}
static void SharedTop_Idle_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, SharedTop_Idle ) ){
        SharedTop_SharedStm_Entry( pCarBody, pStm );
        ImgSprite_setSpriteCoords(batteryOper, 0, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/SharedTop	180	159	159	63	58	88	679	317" );
    }
}
static BOOL SharedTop_Idle_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = SharedTop_Idle;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/SharedTop	180	159	159	63	58	88	679	317" );
    }
    pStm->bHandled |= bResult;
    return SharedTop_SharedStm_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void SharedTop_Idle_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, SharedTop_Idle ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/SharedTop	180	159	159	63	58	88	679	317" );
        SharedTop_SharedStm_Exit( pCarBody, pStm );
    }
}
static void SharedStmHsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState ){
    pStm->nTargetState = targetState;
    pStm->nPseudostate = targetState;
    switch( pStm->nCurrentState ){
    case SharedTop_SharedStm:   SharedTop_SharedStm_Exit( pCarBody, pStm ); break;
    case SharedTop_Discharging: SharedTop_Discharging_Exit( pCarBody, pStm ); break;
    case SharedTop_Charging:    SharedTop_Charging_Exit( pCarBody, pStm ); break;
    case SharedTop_Idle:        SharedTop_Idle_Exit( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL SharedStmHsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams ) {
    if( pResetParams != NULL && pResetParams->entryPt != STATE_UNDEF ){
        pStm->nPseudostate = pResetParams->entryPt;
        return FALSE;
    }
    pStm->nPseudostate = SharedTop_SharedStm;
    pStm->bIsExternTrans = TRUE;
    pStm->nDepth = ( pResetParams != NULL ? pResetParams->nDepth + 1 : 0 );
    SharedStmHsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
    SharedStmHsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static BOOL SharedStmHsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->nLCAState = STATE_UNDEF;
    pStm->bHandled = FALSE;
    switch( pStm->nCurrentState ){
    case SharedTop_SharedStm:                   bResult |= SharedTop_SharedStm_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case SharedTop_Discharging:                 bResult |= SharedTop_Discharging_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case SharedTop_Charging:                    bResult |= SharedTop_Charging_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case SharedTop_Idle:                        bResult |= SharedTop_Idle_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    return bResult;
}
static BOOL SharedStmHsm_Abort( CarBody* pCarBody, HdStateMachine* pStm ) {
    pStm->nSourceState = SharedTop_SharedStm;
    SharedStmHsm_BgnTrans( pCarBody, pStm, STATE_UNDEF );
    SharedStmHsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static void SharedStmHsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm ){
    pStm->nCurrentState = pStm->nTargetState;
    pStm->bIsExternTrans = FALSE;
    switch( pStm->nCurrentState ){
    case SharedTop_SharedStm:   SharedTop_SharedStm_Entry( pCarBody, pStm ); break;
    case SharedTop_Discharging: SharedTop_Discharging_Entry( pCarBody, pStm ); break;
    case SharedTop_Charging:    SharedTop_Charging_Entry( pCarBody, pStm ); break;
    case SharedTop_Idle:        SharedTop_Idle_Entry( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL SharedStmHsm_StateDefaultTrans( CarBody* pCarBody, HdStateMachine* pStm ){
    BOOL bResult = FALSE;
    pStm->nSourceState = pStm->nCurrentState;
    pStm->nLCAState = STATE_UNDEF;
        if ( pStm->nPseudostate == SharedTop_Charge  ) {
            SharedStmHsm_BgnTrans( pCarBody, pStm, SharedTop_Charging );
            SharedStmHsm_EndTrans( pCarBody, pStm );
            bResult |= TRUE;
        } else if ( pStm->nPseudostate == SharedTop_InitPt  ) {
            SharedStmHsm_BgnTrans( pCarBody, pStm, SharedTop_Idle );
            SharedStmHsm_EndTrans( pCarBody, pStm );
            bResult |= TRUE;
        } else if ( pStm->nPseudostate == SharedTop_Discharge  ) {
            SharedStmHsm_BgnTrans( pCarBody, pStm, SharedTop_Discharging );
            SharedStmHsm_EndTrans( pCarBody, pStm );
            bResult |= TRUE;
        }else if( pStm->nCurrentState != pStm->nPseudostate ){
            SharedStmHsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
            SharedStmHsm_EndTrans( pCarBody, pStm );
            bResult = TRUE;
        }else{
        }
    ( ( SharedTop* )pStm->pMain )->lastEnteredStateRecovering = FALSE;
    return bResult;
}
static BOOL SharedTop_EventProc( CarBody* pCarBody, SharedTop* pUsm, CarBody_EVENT nEventId, void* pEventParams ){
    return SharedStmHsm_EventProc( pCarBody, &pUsm->SharedStmHsm, nEventId, pEventParams );
}
static BOOL SharedTop_StateDefaultTrans( CarBody* pCarBody, SharedTop* pUsm ){
    BOOL bResult;
    while( TRUE ){
        bResult = FALSE;
        bResult |= SharedStmHsm_StateDefaultTrans( pCarBody, &pUsm->SharedStmHsm );
        if( bResult == FALSE ){
            break;
        }
    }
    return bResult;
}
static BOOL SharedTop_Reset( CarBody* pCarBody, SharedTop* pUsm, STM_RESET* pResetParams ){
    pUsm->lastEnteredStateRecovering = ( pResetParams != NULL ? pResetParams->lastEnteredStateRecovering : FALSE );
    SharedStmHsm_Abort( pCarBody, &pUsm->SharedStmHsm );
    return SharedStmHsm_Reset( pCarBody, &pUsm->SharedStmHsm, pResetParams );
}
static BOOL SharedTop_Abort( CarBody* pCarBody, SharedTop* pUsm ){
    return SharedStmHsm_Abort( pCarBody, &pUsm->SharedStmHsm );
}
static BOOL SharedTop_IsFinished( SharedTop* pUsm ){
    return pUsm->SharedStmHsm.nPseudostate == SharedTop_SharedStm;
}

static void SharedTop_Prepare( SharedTop* pUsm, HdStateMachine* pParent ){
    pUsm->pParentStm = pParent;
    pUsm->SharedStmHsm.pMain = pUsm;
}

/**
 * Implementation for Statemachine: MainTop
 */
const TCHAR* MainTop_State_toString( MainTop* pUsm, HdStateMachine* pHsm, uint64_t nState ){
    TCHAR* sState;
    if( pHsm == &pUsm->DrivingRgn1Hsm ){
        switch( nState ){
        case MainTop_DrivingRgn1Init            : sState = "DrivingRgn1Init"; break;
        case MainTop_SeatBeltsFastened          : sState = "SeatBeltsFastened"; break;
        case MainTop_SeatBeltsUnfastened        : sState = "SeatBeltsUnfastened"; break;
        case MainTop_SeatBeltInit               : sState = "SeatBeltInit"; break;
        case MainTop_SeatBelts                  : sState = "SeatBelts"; break;
        case MainTop_SeatBeltsTighten           : sState = "SeatBeltsTighten"; break;
        case MainTop_DrivingRgn1                : sState = "DrivingRgn1"; break;
        default                                 : sState = "UnknownState"; break;
        }
    }else if( pHsm == &pUsm->DrivingRgn2Hsm ){
        switch( nState ){
        case MainTop_AirbagArmed                : sState = "AirbagArmed"; break;
        case MainTop_AirbagDeployed             : sState = "AirbagDeployed"; break;
        case MainTop_AirbagInit                 : sState = "AirbagInit"; break;
        case MainTop_DrivingRgn2                : sState = "DrivingRgn2"; break;
        default                                 : sState = "UnknownState"; break;
        }
    }else if( pHsm == &pUsm->DrivingRgn3Hsm ){
        switch( nState ){
        case MainTop_CollisionDetectHit         : sState = "CollisionDetectHit"; break;
        case MainTop_CollisionDetectAlert       : sState = "CollisionDetectAlert"; break;
        case MainTop_CollisionDetectClear       : sState = "CollisionDetectClear"; break;
        case MainTop_CollisionDetectInit        : sState = "CollisionDetectInit"; break;
        case MainTop_DrivingRgn3                : sState = "DrivingRgn3"; break;
        default                                 : sState = "UnknownState"; break;
        }
    }else if( pHsm == &pUsm->CarOnRgn1Hsm ){
        switch( nState ){
        case MainTop_EngineIdle                 : sState = "EngineIdle"; break;
        case MainTop_EngineAccel                : sState = "EngineAccel"; break;
        case MainTop_EngineDeccel               : sState = "EngineDeccel"; break;
        case MainTop_EngineMgmtInit             : sState = "EngineMgmtInit"; break;
        case MainTop_EngineManagement           : sState = "EngineManagement"; break;
        case MainTop_CarOnRgn1Init              : sState = "CarOnRgn1Init"; break;
        case MainTop_CarOnRgn1                  : sState = "CarOnRgn1"; break;
        default                                 : sState = "UnknownState"; break;
        }
    }else if( pHsm == &pUsm->CarOnRgn2Hsm ){
        switch( nState ){
        case MainTop_MainBattery                : sState = "MainBattery"; break;
        case MainTop_BatteryMgmtInit            : sState = "BatteryMgmtInit"; break;
        case MainTop_CarOnRgn2                  : sState = "CarOnRgn2"; break;
        default                                 : sState = "UnknownState"; break;
        }
    }else if( pHsm == &pUsm->AdaptiveSystemRgn1Hsm ){
        switch( nState ){
        case MainTop_InfotainmentOff            : sState = "InfotainmentOff"; break;
        case MainTop_InfotainmentAV             : sState = "InfotainmentAV"; break;
        case MainTop_InfotainmentNavi           : sState = "InfotainmentNavi"; break;
        case MainTop_InfotainmentInit           : sState = "InfotainmentInit"; break;
        case MainTop_AdaptiveSystemRgn1         : sState = "AdaptiveSystemRgn1"; break;
        default                                 : sState = "UnknownState"; break;
        }
    }else if( pHsm == &pUsm->CarOnRgn3Hsm ){
        switch( nState ){
        case MainTop_ClimateCtrlOff             : sState = "ClimateCtrlOff"; break;
        case MainTop_ClimateCtrlMan             : sState = "ClimateCtrlMan"; break;
        case MainTop_ClimateCtrlAuto            : sState = "ClimateCtrlAuto"; break;
        case MainTop_ClimateCtrlInit            : sState = "ClimateCtrlInit"; break;
        case MainTop_AdaptiveSystem             : sState = "AdaptiveSystem"; break;
        case MainTop_AdaptiveSystemInit         : sState = "AdaptiveSystemInit"; break;
        case MainTop_CarOnRgn3                  : sState = "CarOnRgn3"; break;
        default                                 : sState = "UnknownState"; break;
        }
    }else if( pHsm == &pUsm->MainStmHsm ){
        switch( nState ){
        case MainTop_CarOff                     : sState = "CarOff"; break;
        case MainTop_MainInit                   : sState = "MainInit"; break;
        case MainTop_Parked                     : sState = "Parked"; break;
        case MainTop_Neutral                    : sState = "Neutral"; break;
        case MainTop_GearInit                   : sState = "GearInit"; break;
        case MainTop_Reversed                   : sState = "Reversed"; break;
        case MainTop_Drive                      : sState = "Drive"; break;
        case MainTop_Moving                     : sState = "Moving"; break;
        case MainTop_Driving                    : sState = "Driving"; break;
        case MainTop_CarOnInit                  : sState = "CarOnInit"; break;
        case MainTop_CarOn                      : sState = "CarOn"; break;
        case MainTop_MainStm                    : sState = "MainStm"; break;
        default                                 : sState = "UnknownState"; break;
        }
    }else { 
        sState = "UnknownState";
    }
    return sState;
}
static void MainStmHsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState );
static void MainStmHsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm );
static BOOL MainStmHsm_Abort( CarBody* pCarBody, HdStateMachine* pStm );
static BOOL MainStmHsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams );
static BOOL MainStmHsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams );
static void DrivingRgn1Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState );
static void DrivingRgn1Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm );
static BOOL DrivingRgn1Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm );
static BOOL DrivingRgn1Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams );
static BOOL DrivingRgn1Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams );
static void DrivingRgn2Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState );
static void DrivingRgn2Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm );
static BOOL DrivingRgn2Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm );
static BOOL DrivingRgn2Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams );
static BOOL DrivingRgn2Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams );
static void DrivingRgn3Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState );
static void DrivingRgn3Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm );
static BOOL DrivingRgn3Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm );
static BOOL DrivingRgn3Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams );
static BOOL DrivingRgn3Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams );
static void CarOnRgn1Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState );
static void CarOnRgn1Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm );
static BOOL CarOnRgn1Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm );
static BOOL CarOnRgn1Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams );
static BOOL CarOnRgn1Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams );
static void CarOnRgn2Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState );
static void CarOnRgn2Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm );
static BOOL CarOnRgn2Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm );
static BOOL CarOnRgn2Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams );
static BOOL CarOnRgn2Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams );
static void CarOnRgn3Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState );
static void CarOnRgn3Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm );
static BOOL CarOnRgn3Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm );
static BOOL CarOnRgn3Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams );
static BOOL CarOnRgn3Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams );
static void AdaptiveSystemRgn1Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState );
static void AdaptiveSystemRgn1Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm );
static BOOL AdaptiveSystemRgn1Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm );
static BOOL AdaptiveSystemRgn1Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams );
static BOOL AdaptiveSystemRgn1Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams );
static void MainTop_DrivingRgn1_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_DrivingRgn1 ) ){
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_DrivingRgn1 ){
                pStm->nPseudostate = MainTop_DrivingRgn1Init;
            }
            if ( ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering ) {
                pStm->nPseudostate = pStm->lastEnteredState;
            }
    }
}
static BOOL MainTop_DrivingRgn1_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_DrivingRgn1;
    }
    pStm->bHandled |= bResult;
    return pStm->bHandled;
}
static void MainTop_DrivingRgn1_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_DrivingRgn1 ) ){ 
    }
}
static void MainTop_SeatBelts_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_SeatBelts ) ){
        MainTop_DrivingRgn1_Entry( pCarBody, pStm );
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_SeatBelts ){
                pStm->nPseudostate = MainTop_SeatBeltInit;
            }
            printf("SeatBelts monitoring on\n");
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	461	389	403	119	33	34	1422	742" );
    }
}
static BOOL MainTop_SeatBelts_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_SeatBelts;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	461	389	403	119	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_UPDATE:{
                if (FlexButton_GetValue(toggleBtn) == 0) {
                    DrivingRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_SeatBeltsUnfastened );
                    DrivingRgn1Hsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                } else {
                    DrivingRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_SeatBeltsFastened );
                    DrivingRgn1Hsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                }
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_DrivingRgn1_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_SeatBelts_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_SeatBelts ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	461	389	403	119	33	34	1422	742" );
            printf("SeatBelts monitoring off\n");
        MainTop_DrivingRgn1_Exit( pCarBody, pStm );
    }
}
static void MainTop_SeatBeltsFastened_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_SeatBeltsFastened ) ){
        MainTop_SeatBelts_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(seatbelt, 0, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	471	432	128	63	33	34	1422	742" );
    }
}
static BOOL MainTop_SeatBeltsFastened_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_SeatBeltsFastened;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	471	432	128	63	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_SeatBelts_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_SeatBeltsFastened_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_SeatBeltsFastened ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	471	432	128	63	33	34	1422	742" );
        MainTop_SeatBelts_Exit( pCarBody, pStm );
    }
}
static void MainTop_SeatBeltsUnfastened_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_SeatBeltsUnfastened ) ){
        MainTop_SeatBelts_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(seatbelt, 1, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	728	418	124	73	33	34	1422	742" );
    }
}
static BOOL MainTop_SeatBeltsUnfastened_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_SeatBeltsUnfastened;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	728	418	124	73	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_SeatBelts_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_SeatBeltsUnfastened_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_SeatBeltsUnfastened ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	728	418	124	73	33	34	1422	742" );
        MainTop_SeatBelts_Exit( pCarBody, pStm );
    }
}
static void MainTop_SeatBeltsTighten_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_SeatBeltsTighten ) ){
        MainTop_DrivingRgn1_Entry( pCarBody, pStm );
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	317	449	117	45	33	34	1422	742" );
    }
}
static BOOL MainTop_SeatBeltsTighten_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_SeatBeltsTighten;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	317	449	117	45	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_DrivingRgn1_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_SeatBeltsTighten_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_SeatBeltsTighten ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	317	449	117	45	33	34	1422	742" );
        MainTop_DrivingRgn1_Exit( pCarBody, pStm );
    }
}
static void DrivingRgn1Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState ){
    pStm->nTargetState = targetState;
    pStm->nPseudostate = targetState;
    switch( pStm->nCurrentState ){
    case MainTop_DrivingRgn1:   MainTop_DrivingRgn1_Exit( pCarBody, pStm ); break;
    case MainTop_SeatBeltsFastened:MainTop_SeatBeltsFastened_Exit( pCarBody, pStm ); break;
    case MainTop_SeatBeltsUnfastened:MainTop_SeatBeltsUnfastened_Exit( pCarBody, pStm ); break;
    case MainTop_SeatBelts:     MainTop_SeatBelts_Exit( pCarBody, pStm ); break;
    case MainTop_SeatBeltsTighten:MainTop_SeatBeltsTighten_Exit( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL DrivingRgn1Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams ) {
    if( pResetParams != NULL && pResetParams->entryPt != STATE_UNDEF ){
        pStm->nPseudostate = pResetParams->entryPt;
        return FALSE;
    }
    pStm->nPseudostate = MainTop_DrivingRgn1;
    pStm->bIsExternTrans = TRUE;
    pStm->nDepth = ( pResetParams != NULL ? pResetParams->nDepth + 1 : 0 );
    DrivingRgn1Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
    DrivingRgn1Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static BOOL DrivingRgn1Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->nLCAState = STATE_UNDEF;
    pStm->bHandled = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_DrivingRgn1:                   bResult |= MainTop_DrivingRgn1_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_SeatBeltsFastened:             bResult |= MainTop_SeatBeltsFastened_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_SeatBeltsUnfastened:           bResult |= MainTop_SeatBeltsUnfastened_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_SeatBelts:                     bResult |= MainTop_SeatBelts_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_SeatBeltsTighten:              bResult |= MainTop_SeatBeltsTighten_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    return bResult;
}
static BOOL DrivingRgn1Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm ) {
    pStm->nSourceState = MainTop_DrivingRgn1;
    DrivingRgn1Hsm_BgnTrans( pCarBody, pStm, STATE_UNDEF );
    DrivingRgn1Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static void DrivingRgn1Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm ){
    pStm->nCurrentState = pStm->nTargetState;
    pStm->bIsExternTrans = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_DrivingRgn1:   MainTop_DrivingRgn1_Entry( pCarBody, pStm ); break;
    case MainTop_SeatBeltsFastened:MainTop_SeatBeltsFastened_Entry( pCarBody, pStm ); break;
    case MainTop_SeatBeltsUnfastened:MainTop_SeatBeltsUnfastened_Entry( pCarBody, pStm ); break;
    case MainTop_SeatBelts:     MainTop_SeatBelts_Entry( pCarBody, pStm ); break;
    case MainTop_SeatBeltsTighten:MainTop_SeatBeltsTighten_Entry( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL DrivingRgn1Hsm_StateDefaultTrans( CarBody* pCarBody, HdStateMachine* pStm ){
    BOOL bResult = FALSE;
    pStm->nSourceState = pStm->nCurrentState;
    pStm->nLCAState = STATE_UNDEF;
            if ( pStm->nPseudostate == MainTop_DrivingRgn1Init  ) {
                DrivingRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_SeatBelts );
                DrivingRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            } else if ( pStm->nPseudostate == MainTop_SeatBeltInit  ) {
                if (FlexButton_GetValue(toggleBtn) == 0) {
                    DrivingRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_SeatBeltsUnfastened );
                    DrivingRgn1Hsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                } else {
                    DrivingRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_SeatBeltsFastened );
                    DrivingRgn1Hsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                }
            }else if( pStm->nCurrentState != pStm->nPseudostate ){
                DrivingRgn1Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
                DrivingRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult = TRUE;
            }else{
            }
    ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering = FALSE;
    return bResult;
}
static void MainTop_DrivingRgn2_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_DrivingRgn2 ) ){
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_DrivingRgn2 ){
                pStm->nPseudostate = MainTop_AirbagInit;
            }
            if ( ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering ) {
                pStm->nPseudostate = pStm->lastEnteredState;
            }
    }
}
static BOOL MainTop_DrivingRgn2_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_DrivingRgn2;
    }
    pStm->bHandled |= bResult;
    return pStm->bHandled;
}
static void MainTop_DrivingRgn2_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_DrivingRgn2 ) ){ 
    }
}
static void MainTop_AirbagArmed_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_AirbagArmed ) ){
        MainTop_DrivingRgn2_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(airbag, 0, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	655	536	168	63	33	34	1422	742" );
    }
}
static BOOL MainTop_AirbagArmed_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_AirbagArmed;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	655	536	168	63	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_DrivingRgn2_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_AirbagArmed_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_AirbagArmed ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	655	536	168	63	33	34	1422	742" );
        MainTop_DrivingRgn2_Exit( pCarBody, pStm );
    }
}
static void MainTop_AirbagDeployed_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_AirbagDeployed ) ){
        MainTop_DrivingRgn2_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(airbag, 1, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	426	537	217	63	33	34	1422	742" );
    }
}
static BOOL MainTop_AirbagDeployed_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_AirbagDeployed;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	426	537	217	63	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_DrivingRgn2_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_AirbagDeployed_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_AirbagDeployed ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	426	537	217	63	33	34	1422	742" );
            printf("Deflate the bag\n");
        MainTop_DrivingRgn2_Exit( pCarBody, pStm );
    }
}
static void DrivingRgn2Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState ){
    pStm->nTargetState = targetState;
    pStm->nPseudostate = targetState;
    switch( pStm->nCurrentState ){
    case MainTop_DrivingRgn2:   MainTop_DrivingRgn2_Exit( pCarBody, pStm ); break;
    case MainTop_AirbagArmed:   MainTop_AirbagArmed_Exit( pCarBody, pStm ); break;
    case MainTop_AirbagDeployed:MainTop_AirbagDeployed_Exit( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL DrivingRgn2Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams ) {
    if( pResetParams != NULL && pResetParams->entryPt != STATE_UNDEF ){
        pStm->nPseudostate = pResetParams->entryPt;
        return FALSE;
    }
    pStm->nPseudostate = MainTop_DrivingRgn2;
    pStm->bIsExternTrans = TRUE;
    pStm->nDepth = ( pResetParams != NULL ? pResetParams->nDepth + 1 : 0 );
    DrivingRgn2Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
    DrivingRgn2Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static BOOL DrivingRgn2Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->nLCAState = STATE_UNDEF;
    pStm->bHandled = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_DrivingRgn2:                   bResult |= MainTop_DrivingRgn2_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_AirbagArmed:                   bResult |= MainTop_AirbagArmed_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_AirbagDeployed:                bResult |= MainTop_AirbagDeployed_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    return bResult;
}
static BOOL DrivingRgn2Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm ) {
    pStm->nSourceState = MainTop_DrivingRgn2;
    DrivingRgn2Hsm_BgnTrans( pCarBody, pStm, STATE_UNDEF );
    DrivingRgn2Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static void DrivingRgn2Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm ){
    pStm->nCurrentState = pStm->nTargetState;
    pStm->bIsExternTrans = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_DrivingRgn2:   MainTop_DrivingRgn2_Entry( pCarBody, pStm ); break;
    case MainTop_AirbagArmed:   MainTop_AirbagArmed_Entry( pCarBody, pStm ); break;
    case MainTop_AirbagDeployed:MainTop_AirbagDeployed_Entry( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL DrivingRgn2Hsm_StateDefaultTrans( CarBody* pCarBody, HdStateMachine* pStm ){
    BOOL bResult = FALSE;
    pStm->nSourceState = pStm->nCurrentState;
    pStm->nLCAState = STATE_UNDEF;
            if ( pStm->nPseudostate == MainTop_AirbagInit  ) {
                DrivingRgn2Hsm_BgnTrans( pCarBody, pStm, MainTop_AirbagArmed );
                DrivingRgn2Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            }else if( pStm->nCurrentState != pStm->nPseudostate ){
                DrivingRgn2Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
                DrivingRgn2Hsm_EndTrans( pCarBody, pStm );
                bResult = TRUE;
            }else{
            }
    ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering = FALSE;
    return bResult;
}
static void MainTop_DrivingRgn3_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_DrivingRgn3 ) ){
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_DrivingRgn3 ){
                pStm->nPseudostate = MainTop_CollisionDetectInit;
            }
            if ( ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering ) {
                pStm->nPseudostate = pStm->lastEnteredState;
            }
    }
}
static BOOL MainTop_DrivingRgn3_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_DrivingRgn3;
    }
    pStm->bHandled |= bResult;
    return pStm->bHandled;
}
static void MainTop_DrivingRgn3_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_DrivingRgn3 ) ){ 
    }
}
static void MainTop_CollisionDetectHit_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_CollisionDetectHit ) ){
        MainTop_DrivingRgn3_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(radar, 2, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	260	644	117	63	33	34	1422	742" );
    }
}
static BOOL MainTop_CollisionDetectHit_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_CollisionDetectHit;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	260	644	117	63	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_DrivingRgn3_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_CollisionDetectHit_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_CollisionDetectHit ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	260	644	117	63	33	34	1422	742" );
        MainTop_DrivingRgn3_Exit( pCarBody, pStm );
    }
}
static void MainTop_CollisionDetectAlert_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_CollisionDetectAlert ) ){
        MainTop_DrivingRgn3_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(radar, 1, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	471	630	168	63	33	34	1422	742" );
    }
}
static BOOL MainTop_CollisionDetectAlert_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_CollisionDetectAlert;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	471	630	168	63	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_UPDATE:{
                int n = FlexButton_GetValue(slider);
                if (n == 0) {
                    DrivingRgn3Hsm_BgnTrans( pCarBody, pStm, MainTop_CollisionDetectHit );
                    DrivingRgn2Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn2Hsm, &( STM_RESET ){ .entryPt = MainTop_AirbagDeployed } );
                    DrivingRgn1Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn1Hsm, &( STM_RESET ){ .entryPt = MainTop_SeatBeltsTighten } );
                    DrivingRgn3Hsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                } else {
                    if (n >= 2) {
                        DrivingRgn3Hsm_BgnTrans( pCarBody, pStm, MainTop_CollisionDetectClear );
                        DrivingRgn3Hsm_EndTrans( pCarBody, pStm );
                        bResult |= TRUE;
                    }
                }
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_DrivingRgn3_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_CollisionDetectAlert_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_CollisionDetectAlert ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	471	630	168	63	33	34	1422	742" );
        MainTop_DrivingRgn3_Exit( pCarBody, pStm );
    }
}
static void MainTop_CollisionDetectClear_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_CollisionDetectClear ) ){
        MainTop_DrivingRgn3_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(radar, 0, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	682	644	151	63	33	34	1422	742" );
    }
}
static BOOL MainTop_CollisionDetectClear_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_CollisionDetectClear;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	682	644	151	63	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_UPDATE:{
                if (FlexButton_GetValue(slider) <= 2) {
                    DrivingRgn3Hsm_BgnTrans( pCarBody, pStm, MainTop_CollisionDetectAlert );
                    DrivingRgn3Hsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                }
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_DrivingRgn3_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_CollisionDetectClear_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_CollisionDetectClear ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	682	644	151	63	33	34	1422	742" );
        MainTop_DrivingRgn3_Exit( pCarBody, pStm );
    }
}
static void DrivingRgn3Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState ){
    pStm->nTargetState = targetState;
    pStm->nPseudostate = targetState;
    switch( pStm->nCurrentState ){
    case MainTop_DrivingRgn3:   MainTop_DrivingRgn3_Exit( pCarBody, pStm ); break;
    case MainTop_CollisionDetectHit:MainTop_CollisionDetectHit_Exit( pCarBody, pStm ); break;
    case MainTop_CollisionDetectAlert:MainTop_CollisionDetectAlert_Exit( pCarBody, pStm ); break;
    case MainTop_CollisionDetectClear:MainTop_CollisionDetectClear_Exit( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL DrivingRgn3Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams ) {
    if( pResetParams != NULL && pResetParams->entryPt != STATE_UNDEF ){
        pStm->nPseudostate = pResetParams->entryPt;
        return FALSE;
    }
    pStm->nPseudostate = MainTop_DrivingRgn3;
    pStm->bIsExternTrans = TRUE;
    pStm->nDepth = ( pResetParams != NULL ? pResetParams->nDepth + 1 : 0 );
    DrivingRgn3Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
    DrivingRgn3Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static BOOL DrivingRgn3Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->nLCAState = STATE_UNDEF;
    pStm->bHandled = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_DrivingRgn3:                   bResult |= MainTop_DrivingRgn3_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_CollisionDetectHit:            bResult |= MainTop_CollisionDetectHit_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_CollisionDetectAlert:          bResult |= MainTop_CollisionDetectAlert_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_CollisionDetectClear:          bResult |= MainTop_CollisionDetectClear_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    return bResult;
}
static BOOL DrivingRgn3Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm ) {
    pStm->nSourceState = MainTop_DrivingRgn3;
    DrivingRgn3Hsm_BgnTrans( pCarBody, pStm, STATE_UNDEF );
    DrivingRgn3Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static void DrivingRgn3Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm ){
    pStm->nCurrentState = pStm->nTargetState;
    pStm->bIsExternTrans = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_DrivingRgn3:   MainTop_DrivingRgn3_Entry( pCarBody, pStm ); break;
    case MainTop_CollisionDetectHit:MainTop_CollisionDetectHit_Entry( pCarBody, pStm ); break;
    case MainTop_CollisionDetectAlert:MainTop_CollisionDetectAlert_Entry( pCarBody, pStm ); break;
    case MainTop_CollisionDetectClear:MainTop_CollisionDetectClear_Entry( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL DrivingRgn3Hsm_StateDefaultTrans( CarBody* pCarBody, HdStateMachine* pStm ){
    BOOL bResult = FALSE;
    pStm->nSourceState = pStm->nCurrentState;
    pStm->nLCAState = STATE_UNDEF;
            if ( pStm->nPseudostate == MainTop_CollisionDetectInit  ) {
                DrivingRgn3Hsm_BgnTrans( pCarBody, pStm, MainTop_CollisionDetectClear );
                DrivingRgn3Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            }else if( pStm->nCurrentState != pStm->nPseudostate ){
                DrivingRgn3Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
                DrivingRgn3Hsm_EndTrans( pCarBody, pStm );
                bResult = TRUE;
            }else{
            }
    ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering = FALSE;
    return bResult;
}
static void MainTop_CarOnRgn1_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_CarOnRgn1 ) ){
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_CarOnRgn1 ){
                pStm->nPseudostate = MainTop_CarOnRgn1Init;
            }
            if ( ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering ) {
                pStm->nPseudostate = pStm->lastEnteredState;
            }
    }
}
static BOOL MainTop_CarOnRgn1_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_CarOnRgn1;
    }
    pStm->bHandled |= bResult;
    return pStm->bHandled;
}
static void MainTop_CarOnRgn1_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_CarOnRgn1 ) ){ 
    }
}
static void MainTop_EngineManagement_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_EngineManagement ) ){
        MainTop_CarOnRgn1_Entry( pCarBody, pStm );
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_EngineManagement ){
                pStm->nPseudostate = MainTop_EngineMgmtInit;
            }
            printf("Engine on\n");
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	894	203	217	519	33	34	1422	742" );
    }
}
static BOOL MainTop_EngineManagement_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_EngineManagement;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	894	203	217	519	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_UPDATE:{
                int n = FlexButton_GetValue(selectBtn);
                if (n == 0) {
                    CarOnRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_EngineIdle );
                    CarOnRgn1Hsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                } else {
                    if (HdStateMachine_IsIn( &( ( MainTop* )pStm->pMain )->MainStmHsm, MainTop_Moving )) {
                        if (n == 1) {
                            CarOnRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_EngineDeccel );
                            SharedTop_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->MainBatteryHsm, &( STM_RESET ){ .lastEnteredStateRecovering = ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering, .entryPt = SharedTop_Charge } );
                            CarOnRgn2Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn2Hsm, &( STM_RESET ){ .entryPt = MainTop_MainBattery } );
                            CarOnRgn1Hsm_EndTrans( pCarBody, pStm );
                            bResult |= TRUE;
                        } else {
                            CarOnRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_EngineAccel );
                            SharedTop_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->MainBatteryHsm, &( STM_RESET ){ .lastEnteredStateRecovering = ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering, .entryPt = SharedTop_Discharge } );
                            CarOnRgn2Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn2Hsm, &( STM_RESET ){ .entryPt = MainTop_MainBattery } );
                            CarOnRgn1Hsm_EndTrans( pCarBody, pStm );
                            bResult |= TRUE;
                        }
                    }
                }
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_CarOnRgn1_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_EngineManagement_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_EngineManagement ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	894	203	217	519	33	34	1422	742" );
            printf("Engine off\n");
        MainTop_CarOnRgn1_Exit( pCarBody, pStm );
    }
}
static void MainTop_EngineIdle_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_EngineIdle ) ){
        MainTop_EngineManagement_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(speedometer, 1, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	910	271	144	63	33	34	1422	742" );
    }
}
static BOOL MainTop_EngineIdle_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_EngineIdle;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	910	271	144	63	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_EngineManagement_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_EngineIdle_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_EngineIdle ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	910	271	144	63	33	34	1422	742" );
        MainTop_EngineManagement_Exit( pCarBody, pStm );
    }
}
static void MainTop_EngineAccel_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_EngineAccel ) ){
        MainTop_EngineManagement_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(speedometer, 1, 1);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	910	494	117	73	33	34	1422	742" );
    }
}
static BOOL MainTop_EngineAccel_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_EngineAccel;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	910	494	117	73	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_EngineManagement_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_EngineAccel_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_EngineAccel ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	910	494	117	73	33	34	1422	742" );
        MainTop_EngineManagement_Exit( pCarBody, pStm );
    }
}
static void MainTop_EngineDeccel_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_EngineDeccel ) ){
        MainTop_EngineManagement_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(speedometer, 0, 1);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	910	610	117	73	33	34	1422	742" );
    }
}
static BOOL MainTop_EngineDeccel_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_EngineDeccel;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	910	610	117	73	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_EngineManagement_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_EngineDeccel_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_EngineDeccel ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	910	610	117	73	33	34	1422	742" );
        MainTop_EngineManagement_Exit( pCarBody, pStm );
    }
}
static void CarOnRgn1Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState ){
    pStm->nTargetState = targetState;
    pStm->nPseudostate = targetState;
    switch( pStm->nCurrentState ){
    case MainTop_CarOnRgn1:     MainTop_CarOnRgn1_Exit( pCarBody, pStm ); break;
    case MainTop_EngineIdle:    MainTop_EngineIdle_Exit( pCarBody, pStm ); break;
    case MainTop_EngineAccel:   MainTop_EngineAccel_Exit( pCarBody, pStm ); break;
    case MainTop_EngineDeccel:  MainTop_EngineDeccel_Exit( pCarBody, pStm ); break;
    case MainTop_EngineManagement:MainTop_EngineManagement_Exit( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL CarOnRgn1Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams ) {
    if( pResetParams != NULL && pResetParams->entryPt != STATE_UNDEF ){
        pStm->nPseudostate = pResetParams->entryPt;
        return FALSE;
    }
    pStm->nPseudostate = MainTop_CarOnRgn1;
    pStm->bIsExternTrans = TRUE;
    pStm->nDepth = ( pResetParams != NULL ? pResetParams->nDepth + 1 : 0 );
    CarOnRgn1Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
    CarOnRgn1Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static BOOL CarOnRgn1Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->nLCAState = STATE_UNDEF;
    pStm->bHandled = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_CarOnRgn1:                     bResult |= MainTop_CarOnRgn1_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_EngineIdle:                    bResult |= MainTop_EngineIdle_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_EngineAccel:                   bResult |= MainTop_EngineAccel_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_EngineDeccel:                  bResult |= MainTop_EngineDeccel_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_EngineManagement:              bResult |= MainTop_EngineManagement_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    return bResult;
}
static BOOL CarOnRgn1Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm ) {
    pStm->nSourceState = MainTop_CarOnRgn1;
    CarOnRgn1Hsm_BgnTrans( pCarBody, pStm, STATE_UNDEF );
    CarOnRgn1Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static void CarOnRgn1Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm ){
    pStm->nCurrentState = pStm->nTargetState;
    pStm->bIsExternTrans = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_CarOnRgn1:     MainTop_CarOnRgn1_Entry( pCarBody, pStm ); break;
    case MainTop_EngineIdle:    MainTop_EngineIdle_Entry( pCarBody, pStm ); break;
    case MainTop_EngineAccel:   MainTop_EngineAccel_Entry( pCarBody, pStm ); break;
    case MainTop_EngineDeccel:  MainTop_EngineDeccel_Entry( pCarBody, pStm ); break;
    case MainTop_EngineManagement:MainTop_EngineManagement_Entry( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL CarOnRgn1Hsm_StateDefaultTrans( CarBody* pCarBody, HdStateMachine* pStm ){
    BOOL bResult = FALSE;
    pStm->nSourceState = pStm->nCurrentState;
    pStm->nLCAState = STATE_UNDEF;
            if ( pStm->nPseudostate == MainTop_EngineMgmtInit  ) {
                CarOnRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_EngineIdle );
                CarOnRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            } else if ( pStm->nPseudostate == MainTop_CarOnRgn1Init  ) {
                CarOnRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_EngineManagement );
                CarOnRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            }else if( pStm->nCurrentState != pStm->nPseudostate ){
                CarOnRgn1Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
                CarOnRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult = TRUE;
            }else{
            }
    ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering = FALSE;
    return bResult;
}
static void MainTop_CarOnRgn2_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_CarOnRgn2 ) ){
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_CarOnRgn2 ){
                pStm->nPseudostate = MainTop_BatteryMgmtInit;
            }
            if ( ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering ) {
                pStm->nPseudostate = pStm->lastEnteredState;
            }
    }
}
static BOOL MainTop_CarOnRgn2_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_CarOnRgn2;
    }
    pStm->bHandled |= bResult;
    return pStm->bHandled;
}
static void MainTop_CarOnRgn2_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_CarOnRgn2 ) ){ 
    }
}
static void MainTop_MainBattery_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_MainBattery ) ){
        MainTop_CarOnRgn2_Entry( pCarBody, pStm );
            SharedTop_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->MainBatteryHsm, &( STM_RESET ){ .nDepth = pStm->nDepth } );
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	1134	333	96	267	33	34	1422	742" );
    }
}
static BOOL MainTop_MainBattery_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    bResult |= SharedTop_EventProc( pCarBody, &( ( MainTop* )pStm->pMain )->MainBatteryHsm, nEventId, pEventParams );
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_MainBattery;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	1134	333	96	267	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_CarOnRgn2_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_MainBattery_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_MainBattery ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	1134	333	96	267	33	34	1422	742" );
            SharedTop_Abort( pCarBody, &( ( MainTop* )pStm->pMain )->MainBatteryHsm );
        MainTop_CarOnRgn2_Exit( pCarBody, pStm );
    }
}
static void CarOnRgn2Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState ){
    pStm->nTargetState = targetState;
    pStm->nPseudostate = targetState;
    switch( pStm->nCurrentState ){
    case MainTop_CarOnRgn2:     MainTop_CarOnRgn2_Exit( pCarBody, pStm ); break;
    case MainTop_MainBattery:   MainTop_MainBattery_Exit( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL CarOnRgn2Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams ) {
    if( pResetParams != NULL && pResetParams->entryPt != STATE_UNDEF ){
        pStm->nPseudostate = pResetParams->entryPt;
        return FALSE;
    }
    pStm->nPseudostate = MainTop_CarOnRgn2;
    pStm->bIsExternTrans = TRUE;
    pStm->nDepth = ( pResetParams != NULL ? pResetParams->nDepth + 1 : 0 );
    CarOnRgn2Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
    CarOnRgn2Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static BOOL CarOnRgn2Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->nLCAState = STATE_UNDEF;
    pStm->bHandled = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_CarOnRgn2:                     bResult |= MainTop_CarOnRgn2_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_MainBattery:                   bResult |= MainTop_MainBattery_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    return bResult;
}
static BOOL CarOnRgn2Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm ) {
    pStm->nSourceState = MainTop_CarOnRgn2;
    CarOnRgn2Hsm_BgnTrans( pCarBody, pStm, STATE_UNDEF );
    CarOnRgn2Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static void CarOnRgn2Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm ){
    pStm->nCurrentState = pStm->nTargetState;
    pStm->bIsExternTrans = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_CarOnRgn2:     MainTop_CarOnRgn2_Entry( pCarBody, pStm ); break;
    case MainTop_MainBattery:   MainTop_MainBattery_Entry( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL CarOnRgn2Hsm_StateDefaultTrans( CarBody* pCarBody, HdStateMachine* pStm ){
    BOOL bResult = FALSE;
    pStm->nSourceState = pStm->nCurrentState;
    pStm->nLCAState = STATE_UNDEF;
            if ( pStm->nPseudostate == MainTop_BatteryMgmtInit  ) {
                CarOnRgn2Hsm_BgnTrans( pCarBody, pStm, MainTop_MainBattery );
                CarOnRgn2Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            } else if ( pStm->nCurrentState == MainTop_MainBattery && pStm->nPseudostate == SharedTop_Drain  ) {
                CarOnRgn2Hsm_BgnTrans( pCarBody, pStm, MainTop_CarOnRgn2 );
                CarOnRgn2Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            }else if( pStm->nCurrentState != pStm->nPseudostate ){
                CarOnRgn2Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
                CarOnRgn2Hsm_EndTrans( pCarBody, pStm );
                bResult = TRUE;
            }else{
            }
    ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering = FALSE;
    return bResult;
}
static void MainTop_AdaptiveSystemRgn1_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_AdaptiveSystemRgn1 ) ){
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_AdaptiveSystemRgn1 ){
                pStm->nPseudostate = MainTop_InfotainmentInit;
            }
            if ( ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering ) {
                pStm->nPseudostate = pStm->lastEnteredState;
            }
    }
}
static BOOL MainTop_AdaptiveSystemRgn1_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_AdaptiveSystemRgn1;
    }
    pStm->bHandled |= bResult;
    return pStm->bHandled;
}
static void MainTop_AdaptiveSystemRgn1_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_AdaptiveSystemRgn1 ) ){ 
    }
}
static void MainTop_InfotainmentOff_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_InfotainmentOff ) ){
        MainTop_AdaptiveSystemRgn1_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(display, 0, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	1278	491	124	63	33	34	1422	742" );
    }
}
static BOOL MainTop_InfotainmentOff_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_InfotainmentOff;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	1278	491	124	63	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E5:{
                AdaptiveSystemRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_InfotainmentAV );
                AdaptiveSystemRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_AdaptiveSystemRgn1_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_InfotainmentOff_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_InfotainmentOff ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	1278	491	124	63	33	34	1422	742" );
        MainTop_AdaptiveSystemRgn1_Exit( pCarBody, pStm );
    }
}
static void MainTop_InfotainmentAV_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_InfotainmentAV ) ){
        MainTop_AdaptiveSystemRgn1_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(display, 1, 1);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	1278	574	124	63	33	34	1422	742" );
    }
}
static BOOL MainTop_InfotainmentAV_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_InfotainmentAV;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	1278	574	124	63	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E5:{
                AdaptiveSystemRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_InfotainmentNavi );
                AdaptiveSystemRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_AdaptiveSystemRgn1_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_InfotainmentAV_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_InfotainmentAV ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	1278	574	124	63	33	34	1422	742" );
        MainTop_AdaptiveSystemRgn1_Exit( pCarBody, pStm );
    }
}
static void MainTop_InfotainmentNavi_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_InfotainmentNavi ) ){
        MainTop_AdaptiveSystemRgn1_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(display, 1, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	1278	654	124	63	33	34	1422	742" );
    }
}
static BOOL MainTop_InfotainmentNavi_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_InfotainmentNavi;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	1278	654	124	63	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E5:{
                AdaptiveSystemRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_InfotainmentOff );
                AdaptiveSystemRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_AdaptiveSystemRgn1_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_InfotainmentNavi_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_InfotainmentNavi ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	1278	654	124	63	33	34	1422	742" );
        MainTop_AdaptiveSystemRgn1_Exit( pCarBody, pStm );
    }
}
static void AdaptiveSystemRgn1Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState ){
    pStm->nTargetState = targetState;
    pStm->nPseudostate = targetState;
    switch( pStm->nCurrentState ){
    case MainTop_AdaptiveSystemRgn1:MainTop_AdaptiveSystemRgn1_Exit( pCarBody, pStm ); break;
    case MainTop_InfotainmentOff:MainTop_InfotainmentOff_Exit( pCarBody, pStm ); break;
    case MainTop_InfotainmentAV:MainTop_InfotainmentAV_Exit( pCarBody, pStm ); break;
    case MainTop_InfotainmentNavi:MainTop_InfotainmentNavi_Exit( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL AdaptiveSystemRgn1Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams ) {
    if( pResetParams != NULL && pResetParams->entryPt != STATE_UNDEF ){
        pStm->nPseudostate = pResetParams->entryPt;
        return FALSE;
    }
    pStm->nPseudostate = MainTop_AdaptiveSystemRgn1;
    pStm->bIsExternTrans = TRUE;
    pStm->nDepth = ( pResetParams != NULL ? pResetParams->nDepth + 1 : 0 );
    AdaptiveSystemRgn1Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
    AdaptiveSystemRgn1Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static BOOL AdaptiveSystemRgn1Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->nLCAState = STATE_UNDEF;
    pStm->bHandled = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_AdaptiveSystemRgn1:            bResult |= MainTop_AdaptiveSystemRgn1_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_InfotainmentOff:               bResult |= MainTop_InfotainmentOff_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_InfotainmentAV:                bResult |= MainTop_InfotainmentAV_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_InfotainmentNavi:              bResult |= MainTop_InfotainmentNavi_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    return bResult;
}
static BOOL AdaptiveSystemRgn1Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm ) {
    pStm->nSourceState = MainTop_AdaptiveSystemRgn1;
    AdaptiveSystemRgn1Hsm_BgnTrans( pCarBody, pStm, STATE_UNDEF );
    AdaptiveSystemRgn1Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static void AdaptiveSystemRgn1Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm ){
    pStm->nCurrentState = pStm->nTargetState;
    pStm->bIsExternTrans = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_AdaptiveSystemRgn1:MainTop_AdaptiveSystemRgn1_Entry( pCarBody, pStm ); break;
    case MainTop_InfotainmentOff:MainTop_InfotainmentOff_Entry( pCarBody, pStm ); break;
    case MainTop_InfotainmentAV:MainTop_InfotainmentAV_Entry( pCarBody, pStm ); break;
    case MainTop_InfotainmentNavi:MainTop_InfotainmentNavi_Entry( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL AdaptiveSystemRgn1Hsm_StateDefaultTrans( CarBody* pCarBody, HdStateMachine* pStm ){
    BOOL bResult = FALSE;
    pStm->nSourceState = pStm->nCurrentState;
    pStm->nLCAState = STATE_UNDEF;
            if ( pStm->nPseudostate == MainTop_InfotainmentInit  ) {
                AdaptiveSystemRgn1Hsm_BgnTrans( pCarBody, pStm, MainTop_InfotainmentOff );
                AdaptiveSystemRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            }else if( pStm->nCurrentState != pStm->nPseudostate ){
                AdaptiveSystemRgn1Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
                AdaptiveSystemRgn1Hsm_EndTrans( pCarBody, pStm );
                bResult = TRUE;
            }else{
            }
    ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering = FALSE;
    return bResult;
}
static void MainTop_CarOnRgn3_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_CarOnRgn3 ) ){
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_CarOnRgn3 ){
                pStm->nPseudostate = MainTop_AdaptiveSystemInit;
            }
            if ( ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering ) {
                pStm->nPseudostate = pStm->lastEnteredState;
            }
    }
}
static BOOL MainTop_CarOnRgn3_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_CarOnRgn3;
    }
    pStm->bHandled |= bResult;
    return pStm->bHandled;
}
static void MainTop_CarOnRgn3_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_CarOnRgn3 ) ){ 
            ( ( MainTop* )pStm->pMain )->DeepHistoryPseudostate0 = pStm->lastEnteredState;    }
}
static void MainTop_AdaptiveSystem_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_AdaptiveSystem ) ){
        MainTop_CarOnRgn3_Entry( pCarBody, pStm );
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_AdaptiveSystem ){
                pStm->nPseudostate = MainTop_ClimateCtrlInit;
            }
            AdaptiveSystemRgn1Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->AdaptiveSystemRgn1Hsm, &( STM_RESET ){ .nDepth = pStm->nDepth } );
            printf("AdativeSystem on\n");
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	1252	149	167	578	33	34	1422	742" );
    }
}
static BOOL MainTop_AdaptiveSystem_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    bResult |= AdaptiveSystemRgn1Hsm_EventProc( pCarBody, &( ( MainTop* )pStm->pMain )->AdaptiveSystemRgn1Hsm, nEventId, pEventParams );
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_AdaptiveSystem;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	1252	149	167	578	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_CarOnRgn3_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_AdaptiveSystem_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_AdaptiveSystem ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	1252	149	167	578	33	34	1422	742" );
            AdaptiveSystemRgn1Hsm_Abort( pCarBody, &( ( MainTop* )pStm->pMain )->AdaptiveSystemRgn1Hsm );
            printf("AdativeSystem off\n");
        MainTop_CarOnRgn3_Exit( pCarBody, pStm );
    }
}
static void MainTop_ClimateCtrlOff_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_ClimateCtrlOff ) ){
        MainTop_AdaptiveSystem_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(fanCtrl, 0, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	1273	209	124	63	33	34	1422	742" );
    }
}
static BOOL MainTop_ClimateCtrlOff_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_ClimateCtrlOff;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	1273	209	124	63	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E4:{
                CarOnRgn3Hsm_BgnTrans( pCarBody, pStm, MainTop_ClimateCtrlMan );
                CarOnRgn3Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_AdaptiveSystem_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_ClimateCtrlOff_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_ClimateCtrlOff ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	1273	209	124	63	33	34	1422	742" );
        MainTop_AdaptiveSystem_Exit( pCarBody, pStm );
    }
}
static void MainTop_ClimateCtrlMan_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_ClimateCtrlMan ) ){
        MainTop_AdaptiveSystem_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(fanCtrl, 0, 1);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	1273	289	124	73	33	34	1422	742" );
    }
}
static BOOL MainTop_ClimateCtrlMan_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_ClimateCtrlMan;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	1273	289	124	73	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E4:{
                CarOnRgn3Hsm_BgnTrans( pCarBody, pStm, MainTop_ClimateCtrlAuto );
                CarOnRgn3Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_AdaptiveSystem_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_ClimateCtrlMan_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_ClimateCtrlMan ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	1273	289	124	73	33	34	1422	742" );
        MainTop_AdaptiveSystem_Exit( pCarBody, pStm );
    }
}
static void MainTop_ClimateCtrlAuto_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_ClimateCtrlAuto ) ){
        MainTop_AdaptiveSystem_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(fanCtrl, 0, 2);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	1273	381	124	63	33	34	1422	742" );
    }
}
static BOOL MainTop_ClimateCtrlAuto_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_ClimateCtrlAuto;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	1273	381	124	63	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E4:{
                CarOnRgn3Hsm_BgnTrans( pCarBody, pStm, MainTop_ClimateCtrlOff );
                CarOnRgn3Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_AdaptiveSystem_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_ClimateCtrlAuto_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_ClimateCtrlAuto ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	1273	381	124	63	33	34	1422	742" );
        MainTop_AdaptiveSystem_Exit( pCarBody, pStm );
    }
}
static void CarOnRgn3Hsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState ){
    pStm->nTargetState = targetState;
    pStm->nPseudostate = targetState;
    switch( pStm->nCurrentState ){
    case MainTop_CarOnRgn3:     MainTop_CarOnRgn3_Exit( pCarBody, pStm ); break;
    case MainTop_ClimateCtrlOff:MainTop_ClimateCtrlOff_Exit( pCarBody, pStm ); break;
    case MainTop_ClimateCtrlMan:MainTop_ClimateCtrlMan_Exit( pCarBody, pStm ); break;
    case MainTop_ClimateCtrlAuto:MainTop_ClimateCtrlAuto_Exit( pCarBody, pStm ); break;
    case MainTop_AdaptiveSystem:MainTop_AdaptiveSystem_Exit( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL CarOnRgn3Hsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams ) {
    if( pResetParams != NULL && pResetParams->entryPt != STATE_UNDEF ){
        pStm->nPseudostate = pResetParams->entryPt;
        return FALSE;
    }
    pStm->nPseudostate = MainTop_CarOnRgn3;
    pStm->bIsExternTrans = TRUE;
    pStm->nDepth = ( pResetParams != NULL ? pResetParams->nDepth + 1 : 0 );
    CarOnRgn3Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
    CarOnRgn3Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static BOOL CarOnRgn3Hsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->nLCAState = STATE_UNDEF;
    pStm->bHandled = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_CarOnRgn3:                     bResult |= MainTop_CarOnRgn3_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_ClimateCtrlOff:                bResult |= MainTop_ClimateCtrlOff_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_ClimateCtrlMan:                bResult |= MainTop_ClimateCtrlMan_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_ClimateCtrlAuto:               bResult |= MainTop_ClimateCtrlAuto_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_AdaptiveSystem:                bResult |= MainTop_AdaptiveSystem_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    return bResult;
}
static BOOL CarOnRgn3Hsm_Abort( CarBody* pCarBody, HdStateMachine* pStm ) {
    pStm->nSourceState = MainTop_CarOnRgn3;
    CarOnRgn3Hsm_BgnTrans( pCarBody, pStm, STATE_UNDEF );
    CarOnRgn3Hsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static void CarOnRgn3Hsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm ){
    pStm->nCurrentState = pStm->nTargetState;
    pStm->bIsExternTrans = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_CarOnRgn3:     MainTop_CarOnRgn3_Entry( pCarBody, pStm ); break;
    case MainTop_ClimateCtrlOff:MainTop_ClimateCtrlOff_Entry( pCarBody, pStm ); break;
    case MainTop_ClimateCtrlMan:MainTop_ClimateCtrlMan_Entry( pCarBody, pStm ); break;
    case MainTop_ClimateCtrlAuto:MainTop_ClimateCtrlAuto_Entry( pCarBody, pStm ); break;
    case MainTop_AdaptiveSystem:MainTop_AdaptiveSystem_Entry( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL CarOnRgn3Hsm_StateDefaultTrans( CarBody* pCarBody, HdStateMachine* pStm ){
    BOOL bResult = FALSE;
    pStm->nSourceState = pStm->nCurrentState;
    pStm->nLCAState = STATE_UNDEF;
            if ( pStm->nPseudostate == MainTop_AdaptiveSystemInit  ) {
                if( ( ( MainTop* )pStm->pMain )->DeepHistoryPseudostate0 != STATE_UNDEF ){
                    CarOnRgn3Hsm_BgnTrans( pCarBody, pStm, ( ( MainTop* )pStm->pMain )->DeepHistoryPseudostate0 );
                    ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering = TRUE;
                    CarOnRgn3Hsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                }else{
                    CarOnRgn3Hsm_BgnTrans( pCarBody, pStm, MainTop_AdaptiveSystem );
                    CarOnRgn3Hsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                }
            } else if ( pStm->nPseudostate == MainTop_ClimateCtrlInit  ) {
                CarOnRgn3Hsm_BgnTrans( pCarBody, pStm, MainTop_ClimateCtrlOff );
                CarOnRgn3Hsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            }else if( pStm->nCurrentState != pStm->nPseudostate ){
                CarOnRgn3Hsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
                CarOnRgn3Hsm_EndTrans( pCarBody, pStm );
                bResult = TRUE;
            }else{
            }
    ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering = FALSE;
    return bResult;
}
static void MainTop_MainStm_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_MainStm ) ){
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_MainStm ){
                pStm->nPseudostate = MainTop_MainInit;
            }
            if ( ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering ) {
                pStm->nPseudostate = pStm->lastEnteredState;
            }
    }
}
static BOOL MainTop_MainStm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_MainStm;
    }
    pStm->bHandled |= bResult;
    return pStm->bHandled;
}
static void MainTop_MainStm_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_MainStm ) ){ 
    }
}
static void MainTop_CarOff_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_CarOff ) ){
        MainTop_MainStm_Entry( pCarBody, pStm );
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	82	172	96	189	33	34	1422	742" );
    }
}
static BOOL MainTop_CarOff_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_CarOff;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	82	172	96	189	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E0:{
                MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_CarOn );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_MainStm_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_CarOff_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_CarOff ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	82	172	96	189	33	34	1422	742" );
        MainTop_MainStm_Exit( pCarBody, pStm );
    }
}
static void MainTop_CarOn_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_CarOn ) ){
        MainTop_MainStm_Entry( pCarBody, pStm );
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_CarOn ){
                pStm->nPseudostate = MainTop_CarOnInit;
            }
            CarOnRgn1Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn1Hsm, &( STM_RESET ){ .nDepth = pStm->nDepth } );
            CarOnRgn2Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn2Hsm, &( STM_RESET ){ .nDepth = pStm->nDepth } );
            CarOnRgn3Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn3Hsm, &( STM_RESET ){ .nDepth = pStm->nDepth } );
            CarBody_turnOn( carBody );
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	201	74	1228	676	33	34	1422	742" );
    }
}
static BOOL MainTop_CarOn_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    bResult |= CarOnRgn1Hsm_EventProc( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn1Hsm, nEventId, pEventParams );
    bResult |= CarOnRgn2Hsm_EventProc( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn2Hsm, nEventId, pEventParams );
    bResult |= CarOnRgn3Hsm_EventProc( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn3Hsm, nEventId, pEventParams );
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_CarOn;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	201	74	1228	676	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E0:{
                if (HdStateMachine_IsIn( &( ( MainTop* )pStm->pMain )->MainStmHsm, MainTop_Parked )) {
                    MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_CarOff );
                    MainStmHsm_EndTrans( pCarBody, pStm );
                    bResult |= TRUE;
                }
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_MainStm_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_CarOn_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_CarOn ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	201	74	1228	676	33	34	1422	742" );
            CarOnRgn1Hsm_Abort( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn1Hsm );
            CarOnRgn2Hsm_Abort( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn2Hsm );
            CarOnRgn3Hsm_Abort( pCarBody, &( ( MainTop* )pStm->pMain )->CarOnRgn3Hsm );
            CarBody_turnOff( carBody );
        MainTop_MainStm_Exit( pCarBody, pStm );
    }
}
static void MainTop_Driving_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_Driving ) ){
        MainTop_CarOn_Entry( pCarBody, pStm );
            if( !( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering && pStm->nTargetState == MainTop_Driving ){
                pStm->nPseudostate = MainTop_GearInit;
            }
            DrivingRgn1Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn1Hsm, &( STM_RESET ){ .nDepth = pStm->nDepth } );
            DrivingRgn2Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn2Hsm, &( STM_RESET ){ .nDepth = pStm->nDepth } );
            DrivingRgn3Hsm_Reset( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn3Hsm, &( STM_RESET ){ .nDepth = pStm->nDepth } );
            printf("DrivingSystem on\n");
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	224	140	650	600	33	34	1422	742" );
    }
}
static BOOL MainTop_Driving_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    bResult |= DrivingRgn1Hsm_EventProc( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn1Hsm, nEventId, pEventParams );
    bResult |= DrivingRgn2Hsm_EventProc( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn2Hsm, nEventId, pEventParams );
    bResult |= DrivingRgn3Hsm_EventProc( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn3Hsm, nEventId, pEventParams );
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_Driving;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	224	140	650	600	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_CarOn_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_Driving_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_Driving ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	224	140	650	600	33	34	1422	742" );
            DrivingRgn1Hsm_Abort( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn1Hsm );
            DrivingRgn2Hsm_Abort( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn2Hsm );
            DrivingRgn3Hsm_Abort( pCarBody, &( ( MainTop* )pStm->pMain )->DrivingRgn3Hsm );
            printf("DrivingSystem off\n");
        MainTop_CarOn_Exit( pCarBody, pStm );
    }
}
static void MainTop_Parked_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_Parked ) ){
        MainTop_Driving_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(gear, 0, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	302	250	117	84	33	34	1422	742" );
    }
}
static BOOL MainTop_Parked_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_Parked;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	302	250	117	84	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E2:{
                MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_Neutral );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_Driving_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_Parked_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_Parked ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	302	250	117	84	33	34	1422	742" );
            printf("Hide P\n");
        MainTop_Driving_Exit( pCarBody, pStm );
    }
}
static void MainTop_Neutral_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_Neutral ) ){
        MainTop_Driving_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(gear, 1, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	509	170	117	84	33	34	1422	742" );
    }
}
static BOOL MainTop_Neutral_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_Neutral;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	509	170	117	84	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E2:{
                MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_Drive );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        case CarBody_E3:{
                MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_Parked );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        case CarBody_E1:{
                MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_Reversed );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_Driving_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_Neutral_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_Neutral ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	509	170	117	84	33	34	1422	742" );
            printf("Hide N\n");
        MainTop_Driving_Exit( pCarBody, pStm );
    }
}
static void MainTop_Moving_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_Moving ) ){
        MainTop_Driving_Entry( pCarBody, pStm );
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	466	263	373	110	33	34	1422	742" );
    }
}
static BOOL MainTop_Moving_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_Moving;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	466	263	373	110	33	34	1422	742" );
        switch( nEventId ){
        case CarBody_E3:{
                MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_Neutral );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
        } break;
        default: break;
        }
    }
    pStm->bHandled |= bResult;
    return MainTop_Driving_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_Moving_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_Moving ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	466	263	373	110	33	34	1422	742" );
        MainTop_Driving_Exit( pCarBody, pStm );
    }
}
static void MainTop_Reversed_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_Reversed ) ){
        MainTop_Moving_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(gear, 2, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	509	278	117	84	33	34	1422	742" );
    }
}
static BOOL MainTop_Reversed_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_Reversed;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	509	278	117	84	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_Moving_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_Reversed_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_Reversed ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	509	278	117	84	33	34	1422	742" );
            printf("Hide R\n");
        MainTop_Moving_Exit( pCarBody, pStm );
    }
}
static void MainTop_Drive_Entry( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Enterable( pStm, MainTop_Drive ) ){
        MainTop_Moving_Entry( pCarBody, pStm );
            ImgSprite_setSpriteCoords(gear, 3, 0);
        HdStateMachine_DefaultEntryAction( pStm, pCarBody, "Model/CarBody/MainTop	706	278	117	84	33	34	1422	742" );
    }
}
static BOOL MainTop_Drive_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    if( !pStm->bHandled ){
        pStm->nSourceState = MainTop_Drive;
        HdStateMachine_DefaultDoingAction( pStm, pCarBody, "Model/CarBody/MainTop	706	278	117	84	33	34	1422	742" );
    }
    pStm->bHandled |= bResult;
    return MainTop_Moving_EventProc( pCarBody, pStm, nEventId, pEventParams );
}
static void MainTop_Drive_Exit( CarBody* pCarBody, HdStateMachine* pStm ){
    if( HdStateMachine_Exitable( pStm, MainTop_Drive ) ){ 
        HdStateMachine_DefaultExitAction( pStm, pCarBody, "Model/CarBody/MainTop	706	278	117	84	33	34	1422	742" );
            printf("Hide D\n");
        MainTop_Moving_Exit( pCarBody, pStm );
    }
}
static void MainStmHsm_BgnTrans( CarBody *pCarBody, HdStateMachine* pStm, uint64_t targetState ){
    pStm->nTargetState = targetState;
    pStm->nPseudostate = targetState;
    switch( pStm->nCurrentState ){
    case MainTop_MainStm:       MainTop_MainStm_Exit( pCarBody, pStm ); break;
    case MainTop_CarOff:        MainTop_CarOff_Exit( pCarBody, pStm ); break;
    case MainTop_Parked:        MainTop_Parked_Exit( pCarBody, pStm ); break;
    case MainTop_Neutral:       MainTop_Neutral_Exit( pCarBody, pStm ); break;
    case MainTop_Reversed:      MainTop_Reversed_Exit( pCarBody, pStm ); break;
    case MainTop_Drive:         MainTop_Drive_Exit( pCarBody, pStm ); break;
    case MainTop_Moving:        MainTop_Moving_Exit( pCarBody, pStm ); break;
    case MainTop_Driving:       MainTop_Driving_Exit( pCarBody, pStm ); break;
    case MainTop_CarOn:         MainTop_CarOn_Exit( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL MainStmHsm_Reset( CarBody* pCarBody, HdStateMachine* pStm, STM_RESET* pResetParams ) {
    if( pResetParams != NULL && pResetParams->entryPt != STATE_UNDEF ){
        pStm->nPseudostate = pResetParams->entryPt;
        return FALSE;
    }
    pStm->nPseudostate = MainTop_MainStm;
    pStm->bIsExternTrans = TRUE;
    pStm->nDepth = ( pResetParams != NULL ? pResetParams->nDepth + 1 : 0 );
    MainStmHsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
    MainStmHsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static BOOL MainStmHsm_EventProc( CarBody* pCarBody, HdStateMachine* pStm, CarBody_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->nLCAState = STATE_UNDEF;
    pStm->bHandled = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_MainStm:                       bResult |= MainTop_MainStm_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_CarOff:                        bResult |= MainTop_CarOff_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_Parked:                        bResult |= MainTop_Parked_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_Neutral:                       bResult |= MainTop_Neutral_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_Reversed:                      bResult |= MainTop_Reversed_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_Drive:                         bResult |= MainTop_Drive_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_Moving:                        bResult |= MainTop_Moving_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_Driving:                       bResult |= MainTop_Driving_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    case MainTop_CarOn:                         bResult |= MainTop_CarOn_EventProc( pCarBody, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    return bResult;
}
static BOOL MainStmHsm_Abort( CarBody* pCarBody, HdStateMachine* pStm ) {
    pStm->nSourceState = MainTop_MainStm;
    MainStmHsm_BgnTrans( pCarBody, pStm, STATE_UNDEF );
    MainStmHsm_EndTrans( pCarBody, pStm );
    return TRUE;
}
static void MainStmHsm_EndTrans( CarBody *pCarBody, HdStateMachine* pStm ){
    pStm->nCurrentState = pStm->nTargetState;
    pStm->bIsExternTrans = FALSE;
    switch( pStm->nCurrentState ){
    case MainTop_MainStm:       MainTop_MainStm_Entry( pCarBody, pStm ); break;
    case MainTop_CarOff:        MainTop_CarOff_Entry( pCarBody, pStm ); break;
    case MainTop_Parked:        MainTop_Parked_Entry( pCarBody, pStm ); break;
    case MainTop_Neutral:       MainTop_Neutral_Entry( pCarBody, pStm ); break;
    case MainTop_Reversed:      MainTop_Reversed_Entry( pCarBody, pStm ); break;
    case MainTop_Drive:         MainTop_Drive_Entry( pCarBody, pStm ); break;
    case MainTop_Moving:        MainTop_Moving_Entry( pCarBody, pStm ); break;
    case MainTop_Driving:       MainTop_Driving_Entry( pCarBody, pStm ); break;
    case MainTop_CarOn:         MainTop_CarOn_Entry( pCarBody, pStm ); break;
    default: break;
    }
}
static BOOL MainStmHsm_StateDefaultTrans( CarBody* pCarBody, HdStateMachine* pStm ){
    BOOL bResult = FALSE;
    pStm->nSourceState = pStm->nCurrentState;
    pStm->nLCAState = STATE_UNDEF;
            if ( pStm->nPseudostate == MainTop_MainInit  ) {
                MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_CarOff );
                CarBody_turnOff( carBody );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            } else if ( pStm->nPseudostate == MainTop_GearInit  ) {
                MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_Parked );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            } else if ( pStm->nPseudostate == MainTop_CarOnInit  ) {
                MainStmHsm_BgnTrans( pCarBody, pStm, MainTop_Driving );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult |= TRUE;
            }else if( pStm->nCurrentState != pStm->nPseudostate ){
                MainStmHsm_BgnTrans( pCarBody, pStm, pStm->nPseudostate );
                MainStmHsm_EndTrans( pCarBody, pStm );
                bResult = TRUE;
            }else{
            }
    ( ( MainTop* )pStm->pMain )->lastEnteredStateRecovering = FALSE;
    return bResult;
}
static BOOL MainTop_EventProc( CarBody* pCarBody, MainTop* pUsm, CarBody_EVENT nEventId, void* pEventParams ){
    return MainStmHsm_EventProc( pCarBody, &pUsm->MainStmHsm, nEventId, pEventParams );
}
static BOOL MainTop_StateDefaultTrans( CarBody* pCarBody, MainTop* pUsm ){
    BOOL bResult;
    while( TRUE ){
        bResult = FALSE;
        bResult |= DrivingRgn1Hsm_StateDefaultTrans( pCarBody, &pUsm->DrivingRgn1Hsm );
        bResult |= DrivingRgn2Hsm_StateDefaultTrans( pCarBody, &pUsm->DrivingRgn2Hsm );
        bResult |= DrivingRgn3Hsm_StateDefaultTrans( pCarBody, &pUsm->DrivingRgn3Hsm );
        bResult |= CarOnRgn1Hsm_StateDefaultTrans( pCarBody, &pUsm->CarOnRgn1Hsm );
        bResult |= SharedTop_StateDefaultTrans( pCarBody, &pUsm->MainBatteryHsm )
                        || CarOnRgn2Hsm_StateDefaultTrans( pCarBody, &pUsm->CarOnRgn2Hsm );
        bResult |= AdaptiveSystemRgn1Hsm_StateDefaultTrans( pCarBody, &pUsm->AdaptiveSystemRgn1Hsm );
        bResult |= CarOnRgn3Hsm_StateDefaultTrans( pCarBody, &pUsm->CarOnRgn3Hsm );
        bResult |= MainStmHsm_StateDefaultTrans( pCarBody, &pUsm->MainStmHsm );
        if( bResult == FALSE ){
            break;
        }
    }
    return bResult;
}
static BOOL MainTop_Reset( CarBody* pCarBody, MainTop* pUsm, STM_RESET* pResetParams ){
    pUsm->lastEnteredStateRecovering = ( pResetParams != NULL ? pResetParams->lastEnteredStateRecovering : FALSE );
    MainStmHsm_Abort( pCarBody, &pUsm->MainStmHsm );
    return MainStmHsm_Reset( pCarBody, &pUsm->MainStmHsm, pResetParams );
}
static BOOL MainTop_Abort( CarBody* pCarBody, MainTop* pUsm ){
    return MainStmHsm_Abort( pCarBody, &pUsm->MainStmHsm );
}
static BOOL MainTop_IsFinished( MainTop* pUsm ){
    return pUsm->MainStmHsm.nPseudostate == MainTop_MainStm;
}

static void MainTop_Prepare( MainTop* pUsm, HdStateMachine* pParent ){
    pUsm->pParentStm = pParent;
    pUsm->MainStmHsm.pMain = pUsm;
    pUsm->DrivingRgn1Hsm.pMain = pUsm;
    pUsm->DrivingRgn2Hsm.pMain = pUsm;
    pUsm->DrivingRgn3Hsm.pMain = pUsm;
    pUsm->CarOnRgn1Hsm.pMain = pUsm;
    pUsm->CarOnRgn2Hsm.pMain = pUsm;
    SharedTop_Prepare( &pUsm->MainBatteryHsm, &pUsm->CarOnRgn2Hsm );
    pUsm->CarOnRgn3Hsm.pMain = pUsm;
    pUsm->AdaptiveSystemRgn1Hsm.pMain = pUsm;
}
ImgSprite* CarBody_Copy( CarBody* pCarBody, const CarBody* pSource ){
    ImgSprite_Copy( ( ImgSprite* )pCarBody, ( ImgSprite* )pSource );
    pCarBody->x0 = pSource->x0;
    return ( Sprite* )pCarBody;
}
