/* File generated by Đức's ClasHStamP */
#define __ClawMachine_INTERNAL__
#include "CommonInclude.h"
#include "ClawMachine.h"
const TCHAR* ClawMachineEvent_toString( ClawMachine_EVENT value ){
    switch( value ){
    case ClawMachine_Trigger: return _T( "Trigger" );
    default: return _T( "ClawMachine_UNKNOWN" );
    }
}
static void ClawMachineStm_BgnTrans( ClawMachine *pClawMachineTop, ClawMachineStm* pStm, uint64_t targetState, uint64_t initState );
static void ClawMachineStm_EndTrans( ClawMachine *pClawMachineTop, ClawMachineStm* pStm );
static BOOL ClawMachineStm_Reset( ClawMachine* pClawMachineTop, ClawMachineStm* pStm, HdStateMachine* pParentStm, uint64_t nEntryPoint );
static BOOL ClawMachineStm_Abort( ClawMachine* pClawMachineTop, ClawMachineStm* pStm );
static BOOL ClawMachineStm_EventProc( ClawMachine* pClawMachineTop, ClawMachineStm* pStm, ClawMachine_EVENT nEventId, void* pEventParams );
static BOOL ClawMachineStm_RunToCompletion( ClawMachine* pClawMachineTop, ClawMachineStm* pStm );
static void ClawMachineStm_State0_Entry( ClawMachine* pClawMachine, ClawMachineStm* pStm ){
    if( HdStateMachine_Enterable( &pStm->base, ClawMachineStm_State0 ) ){
        ObjsBuilder_showEntry( pClawMachine, pStm, "Model/ClawMachine/ClawMachineStm	220	131	109	67	0	0	660	500" );
    }
}
static BOOL ClawMachineStm_State0_EventProc( ClawMachine* pClawMachine, ClawMachineStm* pStm, ClawMachine_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->base.nSourceState = ClawMachineStm_State0;
    ObjsBuilder_showDoing( pClawMachine, pStm, "Model/ClawMachine/ClawMachineStm	220	131	109	67	0	0	660	500" );
    switch( nEventId ){
    case ClawMachine_Trigger:{
        ClawMachineStm_BgnTrans( pClawMachine, pStm, ClawMachineStm_ClawMachineTop, STATE_UNDEF );
        ClawMachineStm_EndTrans( pClawMachine, pStm );
        bResult = TRUE;
    } break;
    default: break;
    }
    return bResult;
}
static void ClawMachineStm_State0_Exit( ClawMachine* pClawMachine, ClawMachineStm* pStm ){
    if( HdStateMachine_Exitable( &pStm->base, ClawMachineStm_State0 ) ){ 
        ObjsBuilder_showExit( pClawMachine, pStm, "Model/ClawMachine/ClawMachineStm	220	131	109	67	0	0	660	500" );
    }
}
static void ClawMachineStm_EndTrans( ClawMachine *pClawMachine, ClawMachineStm* pStm ){
    pStm->base.nCurrentState = pStm->base.nTargetState;
    pStm->base.bIsExternTrans = FALSE;
    switch( pStm->base.nCurrentState ){
    case ClawMachineStm_State0: ClawMachineStm_State0_Entry( pClawMachine, pStm ); break;
    default: break;
    }
}
static void ClawMachineStm_BgnTrans( ClawMachine *pClawMachine, ClawMachineStm* pStm, uint64_t targetState, uint64_t initState ){
    pStm->base.nTargetState = targetState;
    pStm->base.nPseudostate = targetState;
    if( initState ){
        pStm->base.nPseudostate = initState;
    }
    switch( pStm->base.nCurrentState ){
    case ClawMachineStm_State0: ClawMachineStm_State0_Exit( pClawMachine, pStm ); break;
    default: break;
    }
}
static BOOL ClawMachineStm_StateDefaultTrans( ClawMachine* pClawMachine, ClawMachineStm* pStm ){
    BOOL bResult = FALSE;
    pStm->base.nSourceState = pStm->base.nCurrentState;
    pStm->base.nLCAState = STATE_UNDEF;
    do{   if( pStm->base.nPseudostate == ClawMachineStm_InitialPseudostate0 ){
        ClawMachineStm_BgnTrans( pClawMachine, pStm, ClawMachineStm_State0, STATE_UNDEF );
        ClawMachineStm_EndTrans( pClawMachine, pStm );
        bResult = TRUE;
    }else if( pStm->base.nCurrentState != pStm->base.nPseudostate && IS_IN(pStm->base.nPseudostate, ClawMachineStm_ClawMachineTop) ){
        ClawMachineStm_BgnTrans( pClawMachine, pStm, pStm->base.nPseudostate, STATE_UNDEF );
        ClawMachineStm_EndTrans( pClawMachine, pStm );
        bResult = TRUE;
    }else{
    }   }while( FALSE );
    return bResult;
}
static BOOL ClawMachineStm_RunToCompletion( ClawMachine* pClawMachine, ClawMachineStm* pStm ){
    BOOL bResult;
    do{
        bResult = ClawMachineStm_StateDefaultTrans( pClawMachine, pStm );
    } while ( bResult );
    return bResult;
}
static int ClawMachineStm_IsFinished(ClawMachineStm* pClawMachineStm){
    return pClawMachineStm->base.nCurrentState == ClawMachineStm_ClawMachineTop && pClawMachineStm->base.nCurrentState == pClawMachineStm->base.nPseudostate;
}
static BOOL ClawMachineStm_Reset( ClawMachine* pClawMachine, ClawMachineStm* pStm, HdStateMachine* pParentStm, uint64_t nEntryPoint ) {
    pStm->base.pParentStm = pParentStm;
    if( nEntryPoint == NULL ){
        if( ClawMachineStm_IsFinished( &pStm->base ) ){
            pStm->base.nPseudostate = ClawMachineStm_InitialPseudostate0;
        }
        return FALSE;
    }else{
    if( !IS_IN( nEntryPoint, ClawMachineStm_ClawMachineTop ) ){ return FALSE; }
        if( ClawMachineStm_IsFinished( &pStm->base ) ){
            pStm->base.nPseudostate = nEntryPoint;
            return FALSE;
        }else{
            pStm->base.nPseudostate = nEntryPoint;
        }
    }
    return TRUE;
}
static BOOL ClawMachineStm_EventProc( ClawMachine* pClawMachine, ClawMachineStm* pStm, ClawMachine_EVENT nEventId, void* pEventParams ){
    BOOL bResult = FALSE;
    pStm->base.nLCAState = STATE_UNDEF;
    switch( pStm->base.nCurrentState ){
    case ClawMachineStm_State0:                 bResult |= ClawMachineStm_State0_EventProc( pClawMachine, pStm, nEventId, pEventParams ); break;
    default: break;
    }
    ClawMachineStm_RunToCompletion( pClawMachine, pStm );
    return bResult;
}
static BOOL ClawMachineStm_IsIn( ClawMachineStm* pStm, uint64_t nCompositeState ) {
    if( IS_IN( pStm->base.nCurrentState, nCompositeState ) ){ return TRUE; }
    return FALSE;
}
static BOOL ClawMachineStm_Abort( ClawMachine* pClawMachine, ClawMachineStm* pStm ) {
    pStm->base.nSourceState = ClawMachineStm_ClawMachineTop;
    ClawMachineStm_BgnTrans( pClawMachine, pStm, ClawMachineStm_ClawMachineTop, STATE_UNDEF );
    ClawMachineStm_EndTrans( pClawMachine, pStm );
    return TRUE;
}
BOOL ClawMachine_EventProc( ClawMachine* pClawMachine, ClawMachine_EVENT nEventId, void* pEventParams ){
    return ClawMachineStm_EventProc( pClawMachine, &pClawMachine->mainStm, nEventId, pEventParams );
}
BOOL ClawMachine_Start( ClawMachine* pClawMachine ){
    ClawMachineStm_Abort( pClawMachine, &pClawMachine->mainStm );
    ClawMachineStm_Reset( pClawMachine, &pClawMachine->mainStm, NULL, STATE_UNDEF );
    return ClawMachineStm_RunToCompletion( pClawMachine, &pClawMachine->mainStm );
}
BOOL ClawMachine_Reset( ClawMachine* pClawMachine, uint64_t nEntryPoint ){
    return ClawMachineStm_Reset( pClawMachine, &pClawMachine->mainStm, NULL, nEntryPoint );
}
BOOL ClawMachine_IsIn( ClawMachine* pClawMachine, uint64_t nState ){
    return ClawMachineStm_IsIn( &pClawMachine->mainStm, nState );
}
ClawMachine* ClawMachine_Copy( ClawMachine* pClawMachine, const ClawMachine* pSource ){
    return ( ClawMachine* )pClawMachine;
}
