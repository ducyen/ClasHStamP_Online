/* File generated by Đức's ClasHStamP */
#define __Primitive_INTERNAL__
#include "CommonInclude.h"
#include "Primitive.h"
/** @public @memberof Primitive */
static void Primitive_draw0(
    Primitive* pPrimitive,
    SDL_Renderer* renderer
){
    // Get the size of the renderer
    int width, height;
    if (SDL_GetRendererOutputSize(renderer, &width, &height) != 0) {
        printf("Error getting renderer size: %s\n", SDL_GetError());
    }
    pPrimitive->m_rect = (SDL_Rect){
        pPrimitive->m_iniRect.x * width, 
        pPrimitive->m_iniRect.y * height, 
        pPrimitive->m_iniRect.w * width, 
        pPrimitive->m_iniRect.h * height
    };

	char primitiveType[ 50 ];
	COLORREF lineColor;
	char lineType[ 10 ];
	int lineWidth;
	char isFilled[ 10 ];
	COLORREF fillColor;
	char rectType[ 10 ];

    sscanf( pPrimitive->m_imgPath, "%s%x%s%d%s%x%s", 
	    primitiveType,
	    &lineColor    ,
	    lineType     ,
	    &lineWidth    ,
	    isFilled     ,
	    &fillColor    ,
	    rectType
    );

    if( strcmp( primitiveType, "Rectangle" ) == 0 ){
        int x1 = pPrimitive->m_rect.x;
        int y1 = pPrimitive->m_rect.y;
        int x2 = pPrimitive->m_rect.x + pPrimitive->m_rect.w;
        int y2 = pPrimitive->m_rect.y + pPrimitive->m_rect.h;
        if( strcmp( isFilled, "true" ) == 0 ){
            if( strcmp( rectType, "round" ) == 0 ){
                roundedBoxRGBA(renderer, x1, y1, x2, y2, 10, GetBValue(fillColor), GetGValue(fillColor), GetRValue(fillColor), 0xFF );
            } else{
                boxRGBA(renderer, x1, y1, x2, y2, GetBValue(fillColor), GetGValue(fillColor), GetRValue(fillColor), 0xFF );
            }
        } else{
            if( strcmp( rectType, "round" ) == 0 ){
                roundedRectangleRGBA( renderer, x1, y1, x2, y2, 10, GetBValue(lineColor), GetGValue(lineColor), GetRValue(lineColor), 0xFF );
            } else{
                rectangleRGBA( renderer, x1, y1, x2, y2, GetBValue(lineColor), GetGValue(lineColor), GetRValue(lineColor), 0xFF );
            }
        }
    }else if( strcmp( primitiveType, "Oval" ) == 0 ){
        int rx = pPrimitive->m_rect.w / 2;
        int ry = pPrimitive->m_rect.h / 2;
        int x = pPrimitive->m_rect.x + rx;
        int y = pPrimitive->m_rect.y + ry;
        if( strcmp( isFilled, "true" ) == 0 ){
            filledEllipseRGBA( renderer, x, y, rx, ry, GetBValue(fillColor), GetGValue(fillColor), GetRValue(fillColor), 0xFF );
        } else{
            ellipseRGBA( renderer, x, y, rx, ry, GetBValue(lineColor), GetGValue(lineColor), GetRValue(lineColor), 0xFF );
        }
    }
} /* Primitive_draw0 */

/** @public @memberof Primitive */
static void Primitive_draw1(
    Primitive* pPrimitive,
    SDL_Renderer* renderer
){
} /* Primitive_draw1 */

/** @public @memberof Primitive */
static bool Primitive_load(
    Primitive* pPrimitive,
    SDL_Renderer* renderer
){
    return true;
} /* Primitive_load */

/** @public @memberof Primitive */
static void Primitive_free(
    Primitive* pPrimitive
){
} /* Primitive_free */

Sprite* Primitive_Copy( Primitive* pPrimitive, const Primitive* pSource ){
    Sprite_Copy( ( Sprite* )pPrimitive, ( Sprite* )pSource );
    return ( Sprite* )pPrimitive;
}
const SpriteVtbl gPrimitiveVtbl = {
    .pdraw0                      = Primitive_draw0,
    .pdraw1                      = Primitive_draw1,
    .pload                       = Primitive_load,
    .pfree                       = Primitive_free,
};
